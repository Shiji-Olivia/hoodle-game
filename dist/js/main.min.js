!function(d){d.Hilo||(d.Hilo={});var t=function(){var t=navigator.userAgent,e=document,i=d,n=e.documentElement,r={iphone:/iphone/i.test(t),ipad:/ipad/i.test(t),ipod:/ipod/i.test(t),ios:/iphone|ipad|ipod/i.test(t),android:/android/i.test(t),webkit:/webkit/i.test(t),chrome:/chrome/i.test(t),safari:/safari/i.test(t),firefox:/firefox/i.test(t),ie:/msie/i.test(t),opera:/opera/i.test(t),supportTouch:"ontouchstart"in i,supportCanvas:null!=e.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in i||"orientation"in i.screen,supportDeviceMotion:"ondevicemotion"in i};try{var s="hilo";localStorage.setItem(s,s),localStorage.removeItem(s),r.supportStorage=!0}catch(t){}var a=r.jsVendor=r.webkit?"webkit":r.firefox?"webkit":r.opera?"o":r.ie?"ms":"",o=r.cssVendor="-"+a+"-",h=e.createElement("div"),l=h.style,c=null!=l[a+"Transform"],u=null!=l[a+"Perspective"];return u&&(h.id="test3d",(l=e.createElement("style")).textContent="@media ("+o+"transform-3d){#test3d{height:3px}}",e.head.appendChild(l),n.appendChild(h),u=3==h.offsetHeight,e.head.removeChild(l),n.removeChild(h)),r.supportTransform=c,r.supportTransform3D=u,r}();d.Hilo.browser=t}(window),function(t){t.Hilo||(t.Hilo={});var e={copy:function(t,e,i){for(var n in e)i&&!t.hasOwnProperty(n)&&void 0===t[n]||(t[n]=e[n]);return t}};t.Hilo.util=e}(window),function(t){t.Hilo||(t.Hilo={});var e,i=t.Hilo.browser,n=t.Hilo.util,d=t,a=document,f=a.documentElement,r=0,s={},v={version:"1.1.4",getUid:function(t){var e=++r;if(t){var i=t.charCodeAt(t.length-1);return 48<=i&&i<=57&&(t+="_"),t+e}return e},viewToString:function(t){for(var e,i=t;i;)e=e?i.id+"."+e:i.id,i=i.parent;return e},copy:function(t,e,i){return n.copy(t,e,i),s.copy||(s.copy=!0,console.warn("Hilo.copy has been Deprecated! Use Hilo.util.copy instead.")),t},browser:i,event:(e="ontouchstart"in d,{POINTER_START:e?"touchstart":"mousedown",POINTER_MOVE:e?"touchmove":"mousemove",POINTER_END:e?"touchend":"mouseup"}),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){var i;try{i=e.getBoundingClientRect()}catch(t){i={top:e.offsetTop,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var t=(d.pageXOffset||f.scrollLeft)-(f.clientLeft||0)||0,n=(d.pageYOffset||f.scrollTop)-(f.clientTop||0)||0,r=d.getComputedStyle?getComputedStyle(e):e.currentStyle,s=parseInt,a=s(r.paddingLeft)+s(r.borderLeftWidth)||0,o=s(r.paddingTop)+s(r.borderTopWidth)||0,h=s(r.paddingRight)+s(r.borderRightWidth)||0,l=s(r.paddingBottom)+s(r.borderBottomWidth)||0,c=i.top||0,u=i.left||0;return{left:u+t+a,top:c+n+o,width:(i.right||0)-h-u-a,height:(i.bottom||0)-l-c-o}},createElement:function(t,e){var i,n,r,s=a.createElement(t);for(i in e)if(n=e[i],"style"===i)for(r in n)s.style[r]=n[r];else s[i]=n;return s},getElement:function(t){return a.getElementById(t)},setElementStyleByView:function(t){var e,i=t.drawable,n=i.domElement.style,r=t._stateCache||(t._stateCache={}),s=v.browser.jsVendor,a="px";if(this.cacheStateIfChanged(t,["visible"],r)&&(n.display=t.visible?"":"none"),this.cacheStateIfChanged(t,["alpha"],r)&&(n.opacity=t.alpha),t.visible&&!(t.alpha<=0)){this.cacheStateIfChanged(t,["width"],r)&&(n.width=t.width+a),this.cacheStateIfChanged(t,["height"],r)&&(n.height=t.height+a),this.cacheStateIfChanged(t,["depth"],r)&&(n.zIndex=t.depth+1),(e=this.cacheStateIfChanged(t,["pivotX","pivotY"],r))&&(n[s+"TransformOrigin"]=t.pivotX+a+" "+t.pivotY+a),(this.cacheStateIfChanged(t,["x","y","rotation","scaleX","scaleY"],r)||e)&&(n[s+"Transform"]=this.getTransformCSS(t)),this.cacheStateIfChanged(t,["background"],r)&&(n.backgroundColor=t.background),n.pointerEvents||(n.pointerEvents="none");var o=i.image;if(o){var h=o.src;h!==r.image&&(r.image=h,n.backgroundImage="url("+h+")");var l=i.rect;if(l){var c=l[0],u=l[1];c!==r.sx&&(r.sx=c,n.backgroundPositionX=-c+a),u!==r.sy&&(r.sy=u,n.backgroundPositionY=-u+a)}}var d=t.mask;if(d){var f=d.drawable.domElement.style.backgroundImage;f!==r.maskImage&&(r.maskImage=f,n[s+"MaskImage"]=f,n[s+"MaskRepeat"]="no-repeat");var g=d.x,p=d.y;g===r.maskX&&p===r.maskY||(r.maskX=g,r.maskY=p,n[s+"MaskPosition"]=g+a+" "+p+a)}}},cacheStateIfChanged:function(t,e,i){var n,r,s,a,o=!1;for(n=0,r=e.length;n<r;n++)(a=t[s=e[n]])!=i[s]&&(i[s]=a,o=!0);return o},getTransformCSS:function(t){var e=this.browser.supportTransform3D,i=e?"3d":"";return"translate"+i+"("+(t.x-t.pivotX)+"px, "+(t.y-t.pivotY)+(e?"px, 0px)":"px)")+"rotate"+i+(e?"(0, 0, 1, ":"(")+t.rotation+"deg)scale"+i+"("+t.scaleX+", "+t.scaleY+(e?", 1)":")")}};for(var o in v)t.Hilo[o]=v[o]}(window),function(t){t.Hilo||(t.Hilo={});var e=function(){var n,o,i=function(t){var e,i,n={};for(e in t)i=t[e],r.hasOwnProperty(e)?r[e].call(this,i):n[e]=i;a(this.prototype,n)},r={Extends:function(t){var e=this.prototype,i=s(t.prototype);a(this,t),a(i,e),(i.constructor=this).prototype=i,this.superclass=t.prototype},Mixes:function(t){t instanceof Array||(t=[t]);for(var e,i=this.prototype;e=t.shift();)a(i,e.prototype||e)},Statics:function(t){a(this,t)}},s=function(){if(Object.__proto__)return function(t){return{__proto__:t}};var e=function(){};return function(t){return e.prototype=t,new e}}(),a=function(t){for(var e=1,i=arguments.length;e<i;e++){var n,r=arguments[e];for(var s in r){var a=r[s];!a||"object"!=typeof a||void 0===a.value&&"function"!=typeof a.get&&"function"!=typeof a.set?t[s]=a:(n=n||{})[s]=a}n&&o(t,n)}return t};try{n=Object.defineProperty,o=Object.defineProperties,n({},"$",{value:0})}catch(t){"__defineGetter__"in Object&&(n=function(t,e,i){return"value"in i&&(t[e]=i.value),"get"in i&&t.__defineGetter__(e,i.get),"set"in i&&t.__defineSetter__(e,i.set),t},o=function(t,e){for(var i in e)e.hasOwnProperty(i)&&n(t,i,e[i]);return t})}return{create:function(t){var e=(t=t||{}).hasOwnProperty("constructor")?t.constructor:function(){};return i.call(e,t),e},mix:a}}();t.Hilo.Class=e}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class.create({constructor:function(t,e,i,n,r,s){this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s},concat:function(t){var e,i,n,r,s,a,o=arguments,h=this.a,l=this.b,c=this.c,u=this.d,d=this.tx,f=this.ty;return 6<=o.length?(e=o[0],i=o[1],n=o[2],r=o[3],s=o[4],a=o[5]):(e=t.a,i=t.b,n=t.c,r=t.d,s=t.tx,a=t.ty),this.a=h*e+l*n,this.b=h*i+l*r,this.c=c*e+u*n,this.d=c*i+u*r,this.tx=d*e+f*n+s,this.ty=d*i+f*r+a,this},rotate:function(t){var e=Math.sin(t),i=Math.cos(t),n=this.a,r=this.b,s=this.c,a=this.d,o=this.tx,h=this.ty;return this.a=n*i-r*e,this.b=n*e+r*i,this.c=s*i-a*e,this.d=s*e+a*i,this.tx=o*i-h*e,this.ty=o*e+h*i,this},scale:function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},translate:function(t,e){return this.tx+=t,this.ty+=e,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},transformPoint:function(t,e,i){var n=t.x*this.a+t.y*this.c+this.tx,r=t.x*this.b+t.y*this.d+this.ty;return e&&(n=n+.5>>0,r=r+.5>>0),i?{x:n,y:r}:(t.x=n,t.y=r,t)}});t.Hilo.Matrix=e}(window),function(t){t.Hilo||(t.Hilo={});var e={_listeners:null,on:function(t,e,i){for(var n=this._listeners=this._listeners||{},r=n[t]=n[t]||[],s=0,a=r.length;s<a;s++){if(r[s].listener===e)return}return r.push({listener:e,once:i}),this},off:function(t,e){if(0==arguments.length)return this._listeners=null,this;var i=this._listeners&&this._listeners[t];if(i){if(1==arguments.length)return delete this._listeners[t],this;for(var n=0,r=i.length;n<r;n++){if(i[n].listener===e){i.splice(n,1),0===i.length&&delete this._listeners[t];break}}}return this},fire:function(t,e){var i,n;n="string"==typeof t?t:(i=t).type;var r=this._listeners;if(!r)return!1;var s=r[n];if(s){var a=s.slice(0);if((i=i||new c(n,this,e))._stopped)return!1;for(var o=0;o<a.length;o++){var h=a[o];if(h.listener.call(this,i),h.once){var l=s.indexOf(h);-1<l&&s.splice(l,1)}}return 0==s.length&&delete r[n],!0}return!1}},c=t.Hilo.Class.create({constructor:function(t,e,i){this.type=t,this.target=e,this.detail=i,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),i=t.Event;if(i){var n=i.prototype,r=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){r&&r.call(this),this._stopped=!0}}t.Hilo.EventMixin=e}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,s=t.Hilo.util,a=e.create({constructor:function(t){this.init(t)},image:null,rect:null,init:function(t){var e=this,i=e.image;a.isDrawable(t)?e.image=t:s.copy(e,t,!0);var n=e.image;if("string"==typeof n){if(!i||n!==i.getAttribute("src")){e.image=null;var r=new Image;return t.crossOrigin&&(r.crossOrigin=t.crossOrigin),r.onload=function(){r.onload=null,e.init(r)},void(r.src=n)}n=e.image=i}n&&!e.rect&&(e.rect=[0,0,n.width,n.height])},Statics:{isDrawable:function(t){if(!t||!t.tagName)return!1;var e=t.tagName.toLowerCase();return"img"===e||"canvas"===e||"video"===e}}});t.Hilo.Drawable=a}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo.util,n=e.create({constructor:function(t){t=t||{},i.copy(this,t,!0)},renderType:null,canvas:null,stage:null,blendMode:"source-over",startDraw:function(t){},draw:function(t){},endDraw:function(t){},transform:function(){},hide:function(){},remove:function(t){},clear:function(t,e,i,n){},resize:function(t,e){}});t.Hilo.Renderer=n}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,w=t.Hilo,i=t.Hilo.Renderer,n=e.create({Extends:i,constructor:function(t){n.superclass.constructor.call(this,t),this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(t){return!!(t.visible&&0<t.alpha)&&(t===this.stage&&this.context.clearRect(0,0,t.width,t.height),t.blendMode!==this.blendMode&&(this.context.globalCompositeOperation=this.blendMode=t.blendMode),this.context.save(),!0)},draw:function(t){var e=this.context,i=t.width,n=t.height,r=t.background;r&&(e.fillStyle=r,e.fillRect(0,0,i,n));var s=t.drawable,a=s&&s.image;if(a){var o=s.rect,h=o[2],l=o[3],c=o[4],u=o[5];if(!h||!l)return;i||n||(i=t.width=h,n=t.height=l),(c||u)&&e.translate(c-.5*h,u-.5*l),e.drawImage(a,o[0],o[1],h,l,0,0,i,n)}},endDraw:function(t){this.context.restore()},transform:function(t){var e=t.drawable;if(e&&e.domElement)w.setElementStyleByView(t);else{var i=this.context,n=t.scaleX,r=t.scaleY;if(t===this.stage){var s=this.canvas.style,a=t._scaleX,o=t._scaleY,h=!1;(!a&&1!=n||a&&a!=n)&&(t._scaleX=n,s.width=n*t.width+"px",h=!0),(!o&&1!=r||o&&o!=r)&&(t._scaleY=r,s.height=r*t.height+"px",h=!0),h&&t.updateViewport()}else{var l=t.x,c=t.y,u=t.pivotX,d=t.pivotY,f=t.rotation%360,g=t.mask;g&&(g._render(this),i.clip());var p=t.align;if(p)if("function"==typeof p)t.align();else{var v=t.parent;if(v){var m=t.width,_=t.height,y=v.width,x=v.height;switch(p){case"TL":c=l=0;break;case"T":l=y-m>>1,c=0;break;case"TR":l=y-m,c=0;break;case"L":l=0,c=x-_>>1;break;case"C":l=y-m>>1,c=x-_>>1;break;case"R":l=y-m,c=x-_>>1;break;case"BL":l=0,c=x-_;break;case"B":l=y-m>>1,c=x-_;break;case"BR":l=y-m,c=x-_}}}0==l&&0==c||i.translate(l,c),0!=f&&i.rotate(f*Math.PI/180),1==n&&1==r||i.scale(n,r),0==u&&0==d||i.translate(-u,-d)}0<t.alpha&&(i.globalAlpha*=t.alpha)}},remove:function(t){var e=t.drawable,i=e&&e.domElement;if(i){var n=i.parentNode;n&&n.removeChild(i)}},clear:function(t,e,i,n){this.context.clearRect(t,e,i,n)},resize:function(t,e){var i=this.canvas,n=this.stage,r=i.style;i.width=t,i.height=e,r.width=n.width*n.scaleX+"px",r.height=n.height*n.scaleY+"px"}});t.Hilo.CanvasRenderer=n}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,d=t.Hilo,i=t.Hilo.Renderer,n=t.Hilo.Drawable,r=e.create({Extends:i,constructor:function(t){r.superclass.constructor.call(this,t)},renderType:"dom",startDraw:function(t){var e=t.drawable=t.drawable||new n;return e.domElement=e.domElement||function(t,e){var i=t.tagName||"div",n=e.image,r=t.width||n&&n.width,s=t.height||n&&n.height,a=d.createElement(i),o=a.style;if(t.id&&(a.id=t.id),o.position="absolute",o.left=(t.left||0)+"px",o.top=(t.top||0)+"px",o.width=r+"px",o.height=s+"px","canvas"==i){if(a.width=r,a.height=s,n){var h=a.getContext("2d"),l=e.rect||[0,0,r,s];h.drawImage(n,l[0],l[1],l[2],l[3],t.x||0,t.y||0,t.width||l[2],t.height||l[3])}}else if(o.opacity=null!=t.alpha?t.alpha:1,(t===this.stage||t.clipChildren)&&(o.overflow="hidden"),n&&n.src){o.backgroundImage="url("+n.src+")";var c=t.rectX||0,u=t.rectY||0;o.backgroundPosition=-c+"px "+-u+"px"}return a}(t,e),!0},draw:function(t){var e=t.parent,i=t.drawable.domElement,n=i.parentNode;if(e){var r=e.drawable.domElement;if(r!=n&&r.appendChild(i),!t.width&&!t.height){var s=t.drawable.rect;s&&(s[2]||s[3])&&(t.width=s[2],t.height=s[3])}}else t!==this.stage||n||(i.style.overflow="hidden",this.canvas.appendChild(i))},transform:function(t){if(d.setElementStyleByView(t),t===this.stage){var e=this.canvas.style,i=t._scaleX,n=t._scaleY,r=t.scaleX,s=t.scaleY;(!i&&1!=r||i&&i!=r)&&(t._scaleX=r,e.width=r*t.width+"px"),(!n&&1!=s||n&&n!=s)&&(t._scaleY=s,e.height=s*t.height+"px")}},remove:function(t){var e=t.drawable,i=e&&e.domElement;if(i){var n=i.parentNode;n&&n.removeChild(i)}},hide:function(t){var e=t.drawable&&t.drawable.domElement;e&&(e.style.display="none")},resize:function(t,e){var i=this.canvas.style;i.width=t+"px",i.height=e+"px","absolute"!=i.position&&(i.position="relative")}});t.Hilo.DOMRenderer=r}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,h=t.Hilo,i=t.Hilo.Renderer,l=t.Hilo.Matrix,u=Math.PI/180,a=e.create({Extends:i,Statics:{MAX_BATCH_NUM:2e3,ATTRIBUTE_NUM:5,isSupport:function(){if(null==this._isSupported){var t=document.createElement("canvas");t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))?this._isSupported=!0:this._isSupported=!1}return this._isSupported}},renderType:"webgl",gl:null,_isContextLost:!1,_cacheTexture:{},constructor:function(t){a.superclass.constructor.call(this,t);var e=this;this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.maxBatchNum=a.MAX_BATCH_NUM,this.positionStride=4*a.ATTRIBUTE_NUM;var i=this.maxBatchNum*a.ATTRIBUTE_NUM*4,n=6*this.maxBatchNum;this.arrayBuffer=new ArrayBuffer(4*i),this.float32Array=new Float32Array(this.arrayBuffer),this.uint32Array=new Uint32Array(this.arrayBuffer),this.indexs=new Uint16Array(n);for(var r=0,s=0;r<n;r+=6,s+=4)this.indexs[r+0]=s+0,this.indexs[r+1]=s+1,this.indexs[r+2]=s+2,this.indexs[r+3]=s+1,this.indexs[r+4]=s+2,this.indexs[r+5]=s+3;this.batchIndex=0,this.sprites=[],this.canvas.addEventListener("webglcontextlost",function(t){e._isContextLost=!0,t.preventDefault()},!1),this.canvas.addEventListener("webglcontextrestored",function(t){e._isContextLost=!1,e.setupWebGLStateAndResource()},!1),this.setupWebGLStateAndResource()},setupWebGLStateAndResource:function(){var t=this.gl;t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this._cacheTexture={},this._initShaders(),this.defaultShader.active(),this.positionBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indexs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.arrayBuffer,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.a_position,2,t.FLOAT,!1,this.positionStride,0),t.vertexAttribPointer(this.a_TexCoord,2,t.FLOAT,!1,this.positionStride,8),t.vertexAttribPointer(this.a_tint,4,t.UNSIGNED_BYTE,!0,this.positionStride,16)},context:null,startDraw:function(t){return!!(t.visible&&0<t.alpha)&&(t===this.stage&&this.clear(),!0)},draw:function(t){var e=t.width,i=t.height,n=(t.background,t.drawable),r=n&&n.image;if(r){var s=n.rect,a=s[2],o=s[3];e||i||(e=t.width=a,i=t.height=o),this.batchIndex>=this.maxBatchNum&&this._renderBatches();var h=this._createVertexs(r,s[0],s[1],a,o,0,0,e,i),l=this.batchIndex*this.positionStride,c=this.float32Array,u=this.uint32Array,d=(t.tint>>16)+(65280&t.tint)+((255&t.tint)<<16)+(255*t.__webglRenderAlpha<<24);c[l+0]=h[0],c[l+1]=h[1],c[l+2]=h[2],c[l+3]=h[3],u[l+4]=d,c[l+5]=h[4],c[l+6]=h[5],c[l+7]=h[6],c[l+8]=h[7],u[l+9]=d,c[l+10]=h[8],c[l+11]=h[9],c[l+12]=h[10],c[l+13]=h[11],u[l+14]=d,c[l+15]=h[12],c[l+16]=h[13],c[l+17]=h[14],c[l+18]=h[15],u[l+19]=d;for(var f=t.__webglWorldMatrix,g=0;g<4;g++){var p=c[l+5*g],v=c[l+5*g+1];c[l+5*g]=f.a*p+f.c*v+f.tx,c[l+5*g+1]=f.b*p+f.d*v+f.ty}t.__textureImage=r,this.sprites[this.batchIndex++]=t}},endDraw:function(t){t===this.stage&&this._renderBatches()},transform:function(t){var e=t.drawable;if(e&&e.domElement)h.setElementStyleByView(t);else{var i=t.scaleX,n=t.scaleY;if(t===this.stage){var r=this.canvas.style,s=t._scaleX,a=t._scaleY,o=!1;(!s&&1!=i||s&&s!=i)&&(t._scaleX=i,r.width=i*t.width+"px",o=!0),(!a&&1!=n||a&&a!=n)&&(t._scaleY=n,r.height=n*t.height+"px",o=!0),o&&t.updateViewport(),t.__webglWorldMatrix=t.__webglWorldMatrix||new l(1,0,0,1,0,0)}else t.parent&&(t.__webglWorldMatrix=t.__webglWorldMatrix||new l(1,0,0,1,0,0),this._setConcatenatedMatrix(t,t.parent));0<t.alpha&&(t.parent&&t.parent.__webglRenderAlpha?t.__webglRenderAlpha=t.alpha*t.parent.__webglRenderAlpha:t.__webglRenderAlpha=t.alpha)}},remove:function(t){var e=t.drawable,i=e&&e.domElement;if(i){var n=i.parentNode;n&&n.removeChild(i)}},clear:function(t,e,i,n){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(t,e){if(this.width!==t||this.height!==e){var i=this.canvas,n=this.stage,r=i.style;this.width=i.width=t,this.height=i.height=e,r.width=n.width*n.scaleX+"px",r.height=n.height*n.scaleY+"px",this.gl.viewport(0,0,t,e),this.canvasHalfWidth=.5*t,this.canvasHalfHeight=.5*e,this._uploadProjectionTransform(!0)}},_renderBatches:function(){var t=this.gl;t.bufferSubData(t.ARRAY_BUFFER,0,this.uint32Array.subarray(0,this.batchIndex*this.positionStride));for(var e=0,i=null,n=0;n<this.batchIndex;n++){var r=this.sprites[n];i&&i!==r.__textureImage&&(this._renderBatch(e,n),e=n,1),i=r.__textureImage}this._renderBatch(e,this.batchIndex),this.batchIndex=0},_renderBatch:function(t,e){var i=this.gl,n=e-t;0<n&&(i.bindTexture(i.TEXTURE_2D,this._getTexture(this.sprites[t])),i.drawElements(i.TRIANGLES,6*n,i.UNSIGNED_SHORT,6*t*2))},_uploadProjectionTransform:function(t){this._projectionTransformElements&&!t||(this._projectionTransformElements=new Float32Array([1/this.canvasHalfWidth,0,0,0,-1/this.canvasHalfHeight,0,-1,1,1])),this.gl.uniformMatrix3fv(this.u_projectionTransform,!1,this._projectionTransformElements)},_initShaders:function(){this.defaultShader=new n(this,{v:"            attribute vec2 a_position;\n            attribute vec2 a_TexCoord;\n            attribute vec4 a_tint;\n            uniform mat3 u_projectionTransform;\n            varying vec2 v_TexCoord;\n            varying vec4 v_tint;\n            void main(){\n                gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n                v_TexCoord = a_TexCoord;\n                v_tint = vec4(a_tint.rgb * a_tint.a, a_tint.a);\n            }\n        ",f:"\n            precision mediump float;\n            uniform sampler2D u_Sampler;\n            varying vec2 v_TexCoord;\n            varying vec4 v_tint;\n            void main(){\n                gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_tint;\n            }\n        "},{attributes:["a_position","a_TexCoord","a_tint"],uniforms:["u_projectionTransform","u_Sampler"]})},_createVertexs:function(t,e,i,n,r,s,a,o,h){var l=this.__tempVertexs||[],c=t.width,u=t.height;o=o,h=h,s=s,a=a,1<(n/=c)+(e/=c)&&(n=1-e),1<(r/=u)+(i/=u)&&(r=1-i);var d=0;return l[d++]=s,l[d++]=a,l[d++]=e,l[d++]=i,l[d++]=s+o,l[d++]=a,l[d++]=e+n,l[d++]=i,l[d++]=s,l[d++]=a+h,l[d++]=e,l[d++]=i+r,l[d++]=s+o,l[d++]=a+h,l[d++]=e+n,l[d++]=i+r,l},_setConcatenatedMatrix:function(t,e){var i=t.__webglWorldMatrix,n=1,r=0,s=t.rotation%360,a=t.pivotX,o=t.pivotY,h=t.scaleX,l=t.scaleY;if(s){var c=s*u;n=Math.cos(c),r=Math.sin(c)}i.a=n*h,i.b=r*h,i.c=-r*l,i.d=n*l,i.tx=t.x-i.a*a-i.c*o,i.ty=t.y-i.b*a-i.d*o,i.concat(e.__webglWorldMatrix)},_getTexture:function(t){var e=t.__textureImage,i=this._cacheTexture[e.src];return i||(i=this.activeShader.uploadTexture(e)),i}}),n=function(t,e,i){this.renderer=t,this.gl=t.gl,this.program=this._createProgram(this.gl,e.v,e.f),i=i||{},this.attributes=i.attributes||[],this.uniforms=i.uniforms||[]};n.prototype={active:function(){var t=this,e=t.renderer,i=t.gl,n=t.program;n&&i&&(e.activeShader=t,i.useProgram(n),t.attributes.forEach(function(t){e[t]=i.getAttribLocation(n,t),i.enableVertexAttribArray(e[t])}),t.uniforms.forEach(function(t){e[t]=i.getUniformLocation(n,t)}),t.width===e.width&&t.height===e.height||(t.width=e.width,t.height=e.height,e._uploadProjectionTransform()))},uploadTexture:function(t){var e=this.gl,i=this.renderer,n=e.createTexture(),r=i.u_Sampler;return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.uniform1i(r,0),e.bindTexture(e.TEXTURE_2D,null),this.renderer._cacheTexture[t.src]=n},_createProgram:function(t,e,i){var n=this._createShader(t,t.VERTEX_SHADER,e),r=this._createShader(t,t.FRAGMENT_SHADER,i);if(!n||!r)return null;var s=t.createProgram();if(s&&(t.attachShader(s,n),t.attachShader(s,r),t.linkProgram(s),t.deleteShader(r),t.deleteShader(n),!t.getProgramParameter(s,t.LINK_STATUS))){var a=t.getProgramInfoLog(s);return console.log("Failed to link program: "+a),t.deleteProgram(s),null}return s},_createShader:function(t,e,i){var n=t.createShader(e);if(n&&(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))){var r=t.getShaderInfoLog(n);return console.log("Failed to compile shader: "+r),t.deleteShader(n),null}return n}},t.Hilo.WebGLRenderer=a}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo,i=t.Hilo.Class,n=t.Hilo.EventMixin,u=t.Hilo.Matrix,r=t.Hilo.util,s=function(){return i.create({Mixes:n,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("View"),r.copy(this,t,!0)},tint:16777215,id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,blendMode:"source-over",getStage:function(){for(var t,e=this;t=e.parent;)e=t;return e.canvas?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(t,e){return"number"==typeof e?t.addChildAt(this,e):t.addChild(this),this},removeFromParent:function(){var t=this.parent;return t&&t.removeChild(this),this},getBounds:function(){for(var t,e,i,n,r,s,a,o=this.width,h=this.height,l=this.getConcatenatedMatrix(),c=this.boundsArea||[{x:0,y:0},{x:o,y:0},{x:o,y:h},{x:0,y:h}],u=[],d=0,f=c.length;d<f;d++)e=(t=l.transformPoint(c[d],!0,!0)).x,i=t.y,0==d?(n=r=e,s=a=i):(e<n?n=e:r<e&&(r=e),i<s?s=i:a<i&&(a=i)),u[d]=t;return u.x=n,u.y=s,u.width=r-n,u.height=a-s,u},getConcatenatedMatrix:function(t){for(var e=new u(1,0,0,1,0,0),i=this;i!=t&&i.parent;i=i.parent){var n=1,r=0,s=i.rotation%360,a=i.pivotX,o=i.pivotY,h=i.scaleX,l=i.scaleY;if(s){var c=s*Math.PI/180;n=Math.cos(c),r=Math.sin(c)}0!=a&&(e.tx-=a),0!=o&&(e.ty-=o),e.concat(n*h,r*h,-r*l,n*l,i.x,i.y)}return e},hitTestPoint:function(t,e,i){var n=this.getBounds(),r=t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height;return r&&i&&(r=function(t,e,i){for(var n,r,s,a,o=0,h=!1,l=0,c=i.length;l<c;l++){var u=i[l],d=i[(l+1)%c];if(u.y==d.y&&e==u.y&&(u.x>d.x?(n=d.x,r=u.x):(n=u.x,r=d.x),n<=t&&t<=r))h=!0;else if(u.y>d.y?(s=d.y,a=u.y):(s=u.y,a=d.y),!(e<s||a<e)){var f=(e-u.y)*(d.x-u.x)/(d.y-u.y)+u.x;if(t<f?o++:f==t&&(h=!0),u.x>t&&u.y==e){var g=i[(c+l-1)%c];(g.y<e&&d.y>e||g.y>e&&d.y<e)&&o++}}}return h||o%2==1}(t,e,n)),r},hitTestObject:function(t,e){var i,n,r,s=this.getBounds(),a=t.getBounds(),o=s.x<=a.x+a.width&&a.x<=s.x+s.width&&s.y<=a.y+a.height&&a.y<=s.y+s.height;return o&&e&&(o=!!(r=h(i=s,n=a,{overlap:-1/0,normal:{x:0,y:0}}))&&h(n,i,r)),!!o},_render:function(t,e){this.onUpdate&&!1===this.onUpdate(e)||!t.startDraw(this)||(t.transform(this),this.render(t,e),t.endDraw(this))},_fireMouseEvent:function(t){if((t.eventCurrentTarget=this).fire(t),"mousemove"==t.type){if(!this.__mouseOver){this.__mouseOver=!0;var e=r.copy({},t);e.type="mouseover",this.fire(e)}}else"mouseout"==t.type&&(this.__mouseOver=!1);var i=this.parent;t._stopped||t._stopPropagationed||!i||("mouseout"==t.type||"touchout"==t.type)&&i.hitTestPoint(t.stageX,t.stageY,!0)||i._fireMouseEvent(t)},onUpdate:null,render:function(t,e){t.draw(this)},toString:function(){return e.viewToString(this)}});function h(t,e,i){for(var n,r,s,a,o,h,l,c,u,d=t.length,f=e.length,g={x:0,y:0},p=0;p<d;p++){n=t[p],r=t[p<d-1?p+1:0],g.x=n.y-r.y,g.y=r.x-n.x,s=Math.sqrt(g.x*g.x+g.y*g.y),g.x/=s,g.y/=s,a=o=t[0].x*g.x+t[0].y*g.y;for(var v=1;v<d;v++)o<(c=t[v].x*g.x+t[v].y*g.y)?o=c:c<a&&(a=c);for(h=l=e[0].x*g.x+e[0].y*g.y,v=1;v<f;v++)l<(c=e[v].x*g.x+e[v].y*g.y)?l=c:c<h&&(h=c);if(a<h?(u=h-o,g.x=-g.x,g.y=-g.y):u=a-l,0<=u)return!1;u>i.overlap&&(i.overlap=u,i.normal.x=g.x,i.normal.y=g.y)}return i}}();t.Hilo.View=s}(window),function(t){t.Hilo||(t.Hilo={});var e,i,n=t.Hilo.Drawable,r=t.Hilo.browser,s={_cacheDirty:!0,cache:function(t){(t||this._cacheDirty||!this.drawable)&&this.updateCache()},updateCache:function(){r.supportCanvas&&(e||(e=document.createElement("canvas"),i=e.getContext("2d")),e.width=this.width,e.height=this.height,this._draw(i),this.drawable=this.drawable||new n,this.drawable.init({image:e.toDataURL()}),this._cacheDirty=!1)},setCacheDirty:function(t){this._cacheDirty=t}};t.Hilo.CacheMixin=s}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo,i=t.Hilo.Class,n=t.Hilo.View,a=i.create({Extends:n,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Container"),a.superclass.constructor.call(this,t),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(t,e){var i=this.children,n=i.length,r=t.parent;e=e<0?0:n<e?n:e;var s=this.getChildIndex(t);if(s==e)return this;if(0<=s?(i.splice(s,1),e=e==n?n-1:e):r&&r.removeChild(t),i.splice(e,0,t),s<0)this._updateChildren(e);else{var a=s<e?s:e,o=s<e?e:s;this._updateChildren(a,o+1)}return this},addChild:function(t){for(var e=this.children.length,i=arguments,n=0,r=i.length;n<r;n++)this.addChildAt(i[n],e+n);return this},removeChildAt:function(t){var e=this.children;if(t<0||t>=e.length)return null;var i=e[t];if(i){if(!i.__renderer)for(var n=i;n=n.parent;){if(n.renderer){i.__renderer=n.renderer;break}if(n.__renderer){i.__renderer=n.__renderer;break}}i.__renderer&&i.__renderer.remove(i),i.parent=null,i.depth=-1}return e.splice(t,1),this._updateChildren(t),i},removeChild:function(t){return this.removeChildAt(this.getChildIndex(t))},removeChildById:function(t){for(var e,i=this.children,n=0,r=i.length;n<r;n++)if((e=i[n]).id===t)return this.removeChildAt(n),e;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(t){var e=this.children;return t<0||t>=e.length?null:e[t]},getChildById:function(t){for(var e,i=this.children,n=0,r=i.length;n<r;n++)if((e=i[n]).id===t)return e;return null},getChildIndex:function(t){return this.children.indexOf(t)},setChildIndex:function(t,e){var i=this.children,n=i.indexOf(t);if(0<=n&&n!=e){var r=i.length;e=e<0?0:r<=e?r-1:e,i.splice(n,1),i.splice(e,0,t),this._updateChildren()}return this},swapChildren:function(t,e){var i=this.children,n=this.getChildIndex(t),r=this.getChildIndex(e);i[t.depth=r]=t,i[e.depth=n]=e},swapChildrenAt:function(t,e){var i=this.children,n=this.getChildAt(t),r=this.getChildAt(e);i[n.depth=e]=n,i[r.depth=t]=r},sortChildren:function(t){var e=t,i=this.children;if("string"==typeof e){var n=e;e=function(t,e){return e[n]-t[n]}}i.sort(e),this._updateChildren()},_updateChildren:function(t,e){var i,n=this.children;t=t||0,e=e||n.length;for(var r=t;r<e;r++)(i=n[r]).depth=r+1,i.parent=this},contains:function(t){for(;t=t.parent;)if(t===this)return!0;return!1},getViewAtPoint:function(t,e,i,n,r){for(var s,a,o=n?[]:null,h=this.children,l=h.length-1;0<=l;l--)if(!(!(s=h[l])||!s.visible||s.alpha<=0||r&&!s.pointerEnabled))if(s.children&&s.children.length&&(!r||s.pointerChildren)&&(a=s.getViewAtPoint(t,e,i,n,r)),a){if(!n)return a;a.length&&(o=o.concat(a))}else if(s.hitTestPoint(t,e,i)){if(!n)return s;o.push(s)}return n&&o.length?o:null},render:function(t,e){a.superclass.render.call(this,t,e);var i,n,r,s=this.children.slice(0);for(i=0,n=s.length;i<n;i++)(r=s[i]).parent===this&&r._render(t,e)}});t.Hilo.Container=a}(window),function(t){t.Hilo||(t.Hilo={});var a=t.Hilo,e=t.Hilo.Class,i=t.Hilo.Container,o=t.Hilo.CanvasRenderer,h=t.Hilo.DOMRenderer,l=t.Hilo.WebGLRenderer,m=t.Hilo.browser,_=t.Hilo.util,r=e.create({Extends:i,constructor:function(t){t=t||{},this.id=this.id||t.id||a.getUid("Stage"),r.superclass.constructor.call(this,t),this._initRenderer(t);var e=this.width,i=this.height,n=this.updateViewport();t.width||(e=n&&n.width||320),t.height||(i=n&&n.height||480),this.resize(e,i,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(t){var e=t.canvas,i=t.container,n=t.renderType||"canvas";if("string"==typeof e&&(e=a.getElement(e)),"string"==typeof i&&(i=a.getElement(i)),e)e.getContext||(n="dom");else{var r="dom"===n?"div":"canvas";e=a.createElement(r,{style:{position:"absolute"}})}this.canvas=e,i&&i.appendChild(e);var s={canvas:e,stage:this};switch(n){case"dom":this.renderer=new h(s);break;case"webgl":l.isSupport()?this.renderer=new l(s):this.renderer=new o(s);break;case"canvas":default:this.renderer=new o(s)}},addTo:function(t){var e=this.canvas;return e.parentNode!==t&&t.appendChild(e),this},tick:function(t){this.paused||this._render(this.renderer,t)},enableDOMEvent:function(t,e){var i=this,n=i.canvas,r=i._domListener||(i._domListener=function(t){i._onDOMEvent(t)});t="string"==typeof t?[t]:t,e=!1!==e;for(var s=0;s<t.length;s++){var a=t[s];e?n.addEventListener(a,r,!1):n.removeEventListener(a,r)}return i},_onDOMEvent:function(t){var e=t.type,i=t,n=0==e.indexOf("touch"),r=t;if(n){var s=t.touches,a=t.changedTouches;r=s&&s.length?s[0]:a&&a.length?a[0]:null}var o=r.pageX||r.clientX,h=r.pageY||r.clientY,l=this.viewport||this.updateViewport();i.stageX=o=(o-l.left)/this.scaleX,i.stageY=h=(h-l.top)/this.scaleY,i.stopPropagation=function(){this._stopPropagationed=!0};var c=this.getViewAtPoint(o,h,!0,!1,!0)||this,u=this.canvas,d=this._eventTarget,f="mouseout"===e;if(d&&(d!=c&&(!d.contains||!d.contains(c))||f)){var g="touchmove"===e?"touchout":"mousemove"===e||f||!c?"mouseout":null;if(g){var p=_.copy({},i);p.type=g,(p.eventTarget=d)._fireMouseEvent(p)}i.lastEventTarget=d,this._eventTarget=null}if(c&&c.pointerEnabled&&"mouseout"!==e&&(i.eventTarget=this._eventTarget=c,c._fireMouseEvent(i)),!n){var v=c&&c.pointerEnabled&&c.useHandCursor?"pointer":"";u.style.cursor=v}m.android&&"touchmove"===e&&t.preventDefault()},updateViewport:function(){var t=this.canvas,e=null;return t.parentNode&&(e=this.viewport=a.getElementRect(t)),e},resize:function(t,e,i){(i||this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.renderer.resize(t,e),this.updateViewport())}});t.Hilo.Stage=r}(window),function(t){t.Hilo||(t.Hilo={});var i=t.Hilo,e=t.Hilo.Class,n=t.Hilo.View,r=t.Hilo.Drawable,s=e.create({Extends:n,constructor:function(t){if(t=t||{},this.id=this.id||t.id||i.getUid("Bitmap"),s.superclass.constructor.call(this,t),this.drawable=new r(t),!this.width||!this.height){var e=this.drawable.rect;e&&(this.width=e[2],this.height=e[3])}},setImage:function(t,e){return this.drawable.init({image:t,rect:e}),e?(this.width=e[2],this.height=e[3]):this.width||this.height||(e=this.drawable.rect)&&(this.width=e[2],this.height=e[3]),this}});t.Hilo.Bitmap=s}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo,i=t.Hilo.Class,n=t.Hilo.View,r=t.Hilo.Drawable,s=i.create({Extends:n,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Sprite"),s.superclass.constructor.call(this,t),this._frames=[],this._frameNames={},this.drawable=new r,t.frames&&this.addFrame(t.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(t,e){var i=null!=e?e:this._frames.length;if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)this.setFrame(t[n],i+n);else this.setFrame(t,i);return this},setFrame:function(t,e){var i=this._frames,n=i.length;return(i[e=e<0?0:n<e?n:e]=t).name&&(this._frameNames[t.name]=t),(0!=e||this.width)&&this.height||(this.width=t.rect[2],this.height=t.rect[3]),this},getFrame:function(t){if("number"==typeof t){var e=this._frames;return t<0||t>=e.length?null:e[t]}return this._frameNames[t]},getFrameIndex:function(t){var e=this._frames,i=e.length,n=-1;if("number"==typeof t)n=t;else{var r="string"==typeof t?this._frameNames[t]:t;if(r)for(var s=0;s<i;s++)if(r===e[s]){n=s;break}}return n},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},goto:function(t,e){var i=this._frames.length,n=this.getFrameIndex(t);return this.currentFrame=n<0?0:i<=n?i-1:n,this.paused=e,this._firstRender=!0,this},_render:function(t,e){var i,n=this.currentFrame;if(this._firstRender?(i=n,this._firstRender=!1):i=this._nextFrame(e),i!=n){this.currentFrame=i;var r=this._frames[i].callback;r&&r.call(this)}this.onEnterFrame&&this.onEnterFrame(i),this.drawable.init(this._frames[i]),s.superclass._render.call(this,t,e)},_nextFrame:function(t){var e=this._frames,i=e.length,n=this.currentFrame,r=e[n],s=r.duration||this.interval,a=this._frameElapsed,o=0!=n||this.drawable?a+(this.timeBased?t:1):0;return a=this._frameElapsed=o<s?o:0,(r.stop||!this.loop&&i-1<=n)&&this.stop(),this.paused||0!=a||(null!=r.next?n=this.getFrameIndex(r.next):i-1<=n?n=0:this.drawable&&n++),n},setFrameCallback:function(t,e){return(t=this.getFrame(t))&&(t.callback=e),this},onEnterFrame:null});t.Hilo.Sprite=s}(window),function(t){t.Hilo||(t.Hilo={});var i=t.Hilo,e=t.Hilo.Class,n=t.Hilo.View,r=t.Hilo.Drawable,s=e.create({Extends:n,constructor:function(t){t=t||{},this.id=this.id||t.id||i.getUid("DOMElement"),s.superclass.constructor.call(this,t),this.drawable=new r;var e=this.drawable.domElement=t.element||i.createElement("div");e.id=this.id,this.pointerEnabled&&(e.style.pointerEvents="visible")},_render:function(t,e){this.onUpdate&&!1===this.onUpdate(e)||(t.transform(this),this.visible&&0<this.alpha&&this.render(t,e))},render:function(t,e){if("dom"!==t.renderType){var i,n=t.canvas,r=this.drawable.domElement,s=this.depth,a=n.nextSibling;if(r.parentNode)return;for(;a&&3!=a.nodeType&&!((i=parseInt(a.style.zIndex)||0)<=0||s<i);)a=a.nextSibling;n.parentNode.insertBefore(this.drawable.domElement,a)}else t.draw(this)}});t.Hilo.DOMElement=s}(window),function(t){t.Hilo||(t.Hilo={});var e,u,i=t.Hilo,n=t.Hilo.Class,r=t.Hilo.View,s=t.Hilo.CacheMixin,a=(e=document.createElement("canvas"),u=e.getContext&&e.getContext("2d"),n.create({Extends:r,Mixes:s,constructor:function(t){t=t||{},this.id=this.id||t.id||i.getUid("Graphics"),a.superclass.constructor.call(this,t),this._actions=[]},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(t,e,i,n,r,s){var a=this,o=a._addAction;return o.call(a,["lineWidth",a.lineWidth=t||1]),o.call(a,["strokeStyle",a.strokeStyle=e||"0"]),o.call(a,["lineAlpha",a.lineAlpha=i||1]),null!=n&&o.call(a,["lineCap",a.lineCap=n]),null!=r&&o.call(a,["lineJoin",a.lineJoin=r]),null!=s&&o.call(a,["miterLimit",a.miterLimit=s]),a.hasStroke=!0,a},beginFill:function(t,e){var i=this,n=i._addAction;return n.call(i,["fillStyle",i.fillStyle=t]),n.call(i,["fillAlpha",i.fillAlpha=e||1]),i.hasFill=!0,i},endFill:function(){var t=this,e=t._addAction;return t.hasStroke&&e.call(t,["stroke"]),t.hasFill&&e.call(t,["fill"]),t.setCacheDirty(!0),t},beginLinearGradientFill:function(t,e,i,n,r,s){for(var a=u.createLinearGradient(t,e,i,n),o=0,h=r.length;o<h;o++)a.addColorStop(s[o],r[o]);return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=a])},beginRadialGradientFill:function(t,e,i,n,r,s,a,o){for(var h=u.createRadialGradient(t,e,i,n,r,s),l=0,c=a.length;l<c;l++)h.addColorStop(o[l],a[l]);return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=h])},beginBitmapFill:function(t,e){var i=u.createPattern(t,e||"");return this.hasFill=!0,this._addAction(["fillStyle",this.fillStyle=i])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(t,e){return this._addAction(["moveTo",t,e])},lineTo:function(t,e){return this._addAction(["lineTo",t,e])},quadraticCurveTo:function(t,e,i,n){return this._addAction(["quadraticCurveTo",t,e,i,n])},bezierCurveTo:function(t,e,i,n,r,s){return this._addAction(["bezierCurveTo",t,e,i,n,r,s])},drawRect:function(t,e,i,n){return this._addAction(["rect",t,e,i,n])},drawRoundRectComplex:function(t,e,i,n,r,s,a,o){var h=this,l=h._addAction;return l.call(h,["moveTo",t+r,e]),l.call(h,["lineTo",t+i-s,e]),l.call(h,["arc",t+i-s,e+s,s,-Math.PI/2,0,!1]),l.call(h,["lineTo",t+i,e+n-a]),l.call(h,["arc",t+i-a,e+n-a,a,0,Math.PI/2,!1]),l.call(h,["lineTo",t+o,e+n]),l.call(h,["arc",t+o,e+n-o,o,Math.PI/2,Math.PI,!1]),l.call(h,["lineTo",t,e+r]),l.call(h,["arc",t+r,e+r,r,Math.PI,3*Math.PI/2,!1]),h},drawRoundRect:function(t,e,i,n,r){return this.drawRoundRectComplex(t,e,i,n,r,r,r,r)},drawCircle:function(t,e,i,n,r,s){return this._addAction(["arc",t+i,e+i,i,n,r,s])},drawEllipse:function(t,e,i,n){var r=this;if(i==n)return r.drawCircle(t,e,i,0,2*Math.PI,!1);var s=r._addAction,a=i/2,o=n/2,h=.5522847498307933,l=h*a,c=h*o;return t+=a,e+=o,s.call(r,["moveTo",t+a,e]),s.call(r,["bezierCurveTo",t+a,e-c,t+l,e-o,t,e-o]),s.call(r,["bezierCurveTo",t-l,e-o,t-a,e-c,t-a,e]),s.call(r,["bezierCurveTo",t-a,e+c,t-l,e+o,t,e+o]),s.call(r,["bezierCurveTo",t+l,e+o,t+a,e+c,t+a,e]),r},drawSVGPath:function(t){var e=this,i=e._addAction,n=t.replace(/,/g," ").replace(/-/g," -").split(/(?=[a-zA-Z])/);i.call(e,["beginPath"]);for(var r,s={x:0,y:0},a={x:0,y:0},o=0,h=n.length;o<h;o++){var l=n[o];if(l.length){var c=l[0],u=c.toUpperCase(),d=this._getSVGParams(l),f=u!==c;switch(u){case"M":f&&this._convertToAbsolute(s,d),i.call(e,["moveTo",d[0],d[1]]),this._setCurrentPoint(s,d[0],d[1]);break;case"L":f&&this._convertToAbsolute(s,d),i.call(e,["lineTo",d[0],d[1]]),this._setCurrentPoint(s,d[0],d[1]);break;case"H":f&&(d[0]+=s.x),i.call(e,["lineTo",d[0],s.y]),s.x=d[0];break;case"V":f&&(d[0]+=s.y),i.call(e,["lineTo",s.x,d[0]]),s.y=d[0];break;case"Z":i.call(e,["closePath"]);break;case"C":f&&this._convertToAbsolute(s,d),i.call(e,["bezierCurveTo",d[0],d[1],d[2],d[3],d[4],d[5]]),a.x=d[2],a.y=d[3],this._setCurrentPoint(s,d[4],d[5]);break;case"S":f&&this._convertToAbsolute(s,d),g="C"===r||"S"===r?this._getReflectionPoint(s,a):s,i.call(e,["bezierCurveTo",g.x,g.y,d[0],d[1],d[2],d[3]]),a.x=d[0],a.y=d[1],this._setCurrentPoint(s,d[2],d[3]);break;case"Q":f&&this._convertToAbsolute(s,d),i.call(e,["quadraticCurveTo",d[0],d[1],d[2],d[3]]),a.x=d[0],a.y=d[1],this._setCurrentPoint(s,d[2],d[3]);break;case"T":var g;f&&this._convertToAbsolute(s,d),g="Q"===r||"T"===r?this._getReflectionPoint(s,a):s,i.call(e,["quadraticCurveTo",g.x,g.y,d[0],d[1]]),a=g,this._setCurrentPoint(s,d[0],d[1])}r=u}}return e},_getSVGParams:function(t){var e=t.substring(1).replace(/[\s]+$|^[\s]+/g,"").split(/[\s]+/);0==e[0].length&&e.shift();for(var i=0,n=e.length;i<n;i++)e[i]=parseFloat(e[i]);return e},_convertToAbsolute:function(t,e){for(var i=0,n=e.length;i<n;i++)e[i]+=i%2==0?t.x:t.y},_setCurrentPoint:function(t,e,i){t.x=e,t.y=i},_getReflectionPoint:function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},_draw:function(t){var e,i=this._actions,n=i.length;for(t.beginPath(),e=0;e<n;e++){var r=i[e],s=r[0],a=1<r.length?r.slice(1):null;"function"==typeof t[s]?t[s].apply(t,a):t[s]=r[1]}},render:function(t,e){"canvas"===t.renderType?this._draw(t.context):(this.cache(),t.draw(this))},clear:function(){var t=this;return t._actions.length=0,t.lineWidth=1,t.lineAlpha=1,t.lineCap=null,t.lineJoin=null,t.miterLimit=10,t.hasStroke=!1,t.strokeStyle="0",t.hasFill=!1,t.fillStyle="0",t.fillAlpha=1,t.setCacheDirty(!0),t},_addAction:function(t){return this._actions.push(t),this}}));t.Hilo.Graphics=a}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,r=t.Hilo,i=t.Hilo.View,n=t.Hilo.CacheMixin,s=e.create({Extends:i,Mixes:n,constructor:function(t){t=t||{},this.id=this.id||t.id||r.getUid("Text"),s.superclass.constructor.call(this,t),t.font||(this.font="12px arial"),this._fontHeight=s.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(t){return this.font!==t&&(this.font=t,this._fontHeight=s.measureFontHeight(t)),this},render:function(t,e){var i=this;if("canvas"===t.renderType)this.drawable?t.draw(i):i._draw(t.context);else if("dom"===t.renderType){var n=i.drawable.domElement,r=n.style;r.font=i.font,r.textAlign=i.textAlign,r.color=i.color,r.width=i.width+"px",r.height=i.height+"px",r.lineHeight=i._fontHeight+i.lineSpacing+"px",n.innerHTML=i.text,t.draw(this)}else i.cache(),t.draw(i)},_draw:function(t){var e=this,i=e.text.toString();if(i){t.font=e.font,t.textAlign=e.textAlign,t.textBaseline="top";var n,r,s,a,o,h=i.split(/\r\n|\r|\n|<br(?:[ \/])*>/),l=0,c=0,u=e._fontHeight+e.lineSpacing,d=[];for(n=0,a=h.length;n<a;n++)if(r=h[n],(s=t.measureText(r).width)<=e.maxWidth)d.push({text:r,y:c}),l<s&&(l=s),c+=u;else{var f,g,p,v="",m=0;for(g=0,o=r.length;g<o;g++)p=r[g],(f=t.measureText(v+p).width)>e.maxWidth?(d.push({text:v,y:c}),l<m&&(l=m),c+=u,v=p):(m=f,v+=p),g==o-1&&(d.push({text:v,y:c}),v!==p&&l<f&&(l=f),c+=u)}e.textWidth=l,e.textHeight=c,e.width||(e.width=l),e.height||(e.height=c);var _=0;switch(e.textVAlign){case"middle":_=e.height-e.textHeight>>1;break;case"bottom":_=e.height-e.textHeight}var y=e.background;for(y&&(t.fillStyle=y,t.fillRect(0,0,e.width,e.height)),e.outline?t.strokeStyle=e.color:t.fillStyle=e.color,n=0;n<d.length;n++)r=d[n],e._drawTextLine(t,r.text,_+r.y)}},_drawTextLine:function(t,e,i){var n=0,r=this.width;switch(this.textAlign){case"center":n=r>>1;break;case"right":case"end":n=r}this.outline?t.strokeText(e,n,i):t.fillText(e,n,i)},Statics:{measureFontHeight:function(t){var e,i=document.documentElement,n=r.createElement("div",{style:{font:t,position:"absolute"},innerHTML:"M"});return i.appendChild(n),e=n.offsetHeight,i.removeChild(n),e}}});t.Hilo.Text=s}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo,n=t.Hilo.Container,r=t.Hilo.Bitmap,s=e.create({Extends:n,constructor:function(t){t=t||{},this.id=this.id||t.id||i.getUid("BitmapText"),s.superclass.constructor.call(this,t);var e=t.text+"";e&&(this.text="",this.setText(e)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(t){var e=this,i=t.toString(),n=i.length;if(e.text!=i){e.text=i;var r,s,a,o,h=0,l=0,c=0;for(r=0;r<n;r++)s=i.charAt(r),(a=e.glyphs[s])&&(c=h+(0<h?e.letterSpacing:0),e.children[r]?(o=e.children[r]).setImage(a.image,a.rect):(o=e._createBitmap(a),e.addChild(o)),h=(o.x=c)+a.rect[2],l=Math.max(l,a.rect[3]));for(r=e.children.length-1;n<=r;r--)e._releaseBitmap(e.children[r]),e.children[r].removeFromParent();return e.width=h,e.height=l,this.setTextAlign(),e}},_createBitmap:function(t){var e;return s._pool.length?(e=s._pool.pop()).setImage(t.image,t.rect):e=new r({image:t.image,rect:t.rect}),e},_releaseBitmap:function(t){s._pool.push(t)},setTextAlign:function(t){switch(this.textAlign=t||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0}return this},hasGlyphs:function(t){var e=this.glyphs;if(!e)return!1;var i,n=(t=t.toString()).length;for(i=0;i<n;i++)if(!e[t.charAt(i)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(t,e,i,n){var r=t.toString();i=i||r.length,n=n||1;for(var s=e.width/i,a=e.height/n,o={},h=0,l=t.length;h<l;h++){o[r.charAt(h)]={image:e,rect:[s*(h%i),a*Math.floor(h/i),s,a]}}return o}}});t.Hilo.BitmapText=s}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo,i=t.Hilo.Class,n=t.Hilo.View,r=t.Hilo.Drawable,s=t.Hilo.util,a=i.create({Extends:n,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("Button"),a.superclass.constructor.call(this,t),this.drawable=new r(t),this.setState(a.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(t){return this.enabled!=t&&(t?this.setState(a.UP):this.setState(a.DISABLED)),this},setState:function(t){if(this.state!==t){var e;switch(this.state=t,this.pointerEnabled=this.enabled=t!==a.DISABLED,t){case a.UP:e=this.upState;break;case a.OVER:e=this.overState;break;case a.DOWN:e=this.downState;break;case a.DISABLED:e=this.disabledState}e&&(this.drawable.init(e),s.copy(this,e,!0))}return this},fire:function(t,e){if(this.enabled){switch("string"==typeof t?t:t.type){case"mousedown":case"touchstart":case"touchmove":this.setState(a.DOWN);break;case"mouseover":this.setState(a.OVER);break;case"mouseup":this.overState?this.setState(a.OVER):this.upState&&this.setState(a.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(a.UP)}return a.superclass.fire.call(this,t,e)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});t.Hilo.Button=a}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=function(){return e.create({constructor:function(t){this._frames=function(t){var e,i,n=t.frames;if(!n)return null;var r,s=[];if(n instanceof Array)for(e=0,i=n.length;e<i;e++)r=n[e],s[e]={image:t.image,rect:r};else{var a=n.frameWidth,o=n.frameHeight,h=t.width/a|0,l=t.height/o|0,c=n.numFrames||h*l;for(e=0;e<c;e++)s[e]={image:t.image,rect:[e%h*a,(e/h|0)*o,a,o]}}return s}(t),this._sprites=function(t,e){var i,n,r=t.sprites;if(!r)return null;var s,a,o,h={};for(var l in r){if(f(s=r[l]))a=d(e[s]);else if(s instanceof Array)for(a=[],i=0,n=s.length;i<n;i++){var c,u=s[i];f(u)?o=d(e[u]):(f(c=u.rect)&&(c=e[u.rect]),o=d(c,u)),a[i]=o}else for(a=[],i=s.from;i<=s.to;i++)a[i-s.from]=d(e[i],s[i]);h[l]=a}return h}(t,this._frames)},_frames:null,_sprites:null,getFrame:function(t){var e=this._frames;return e&&e[t]},getSprite:function(t){var e=this._sprites;return e&&e[t]},Statics:{createSpriteFrames:function(t,e,i,n,r,s,a){var o,h;if("[object Array]"===Object.prototype.toString.call(t)){var l=[];for(o=0,h=t.length;o<h;o++)l=l.concat(this.createSpriteFrames.apply(this,t[o]));return l}if("string"==typeof e){var c=e.split(",");e=[];for(var u=0,d=c.length;u<d;u++){var f=c[u].split("-");if(1==f.length)e.push(parseInt(f[0]));else for(o=parseInt(f[0]),h=parseInt(f[1]);o<=h;o++)e.push(o)}}var g=Math.floor(i.width/n);for(o=0;o<e.length;o++){var p=e[o];e[o]={rect:[n*(p%g),r*Math.floor(p/g),n,r],image:i,duration:a}}return e[0].name=t,s?e[e.length-1].next=t:e[e.length-1].stop=!0,e}}});function d(t,e){var i={image:t.image,rect:t.rect};return e&&(i.name=e.name||null,i.duration=e.duration||0,i.stop=!!e.stop,i.next=e.next||null),i}function f(t){return"number"==typeof t}}();t.Hilo.TextureAtlas=i}(window),function(s){s.Hilo||(s.Hilo={});var t=s.Hilo.Class,a=s.Hilo.browser,e=t.create({constructor:function(t){this._targetFPS=t||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(t){if(!this._intervalId){this._lastTime=+new Date;var e,i=this,n=this._interval,r=s.requestAnimationFrame||s[a.jsVendor+"RequestAnimationFrame"];t&&r&&n<17?(this._useRAF=!0,e=function(){i._intervalId=r(e),i._tick()}):e=function(){i._intervalId=setTimeout(e,n),i._tick()},this._paused=!1,e()}},stop:function(){this._useRAF?(s.cancelAnimationFrame||s[a.jsVendor+"CancelAnimationFrame"])(this._intervalId):clearTimeout(this._intervalId);this._intervalId=null,this._lastTime=0,this._paused=!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var t=+new Date,e=t-this._lastTime,i=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=t-this._lastTime,this._lastTime=t;for(var n=i.slice(0),r=0,s=n.length;r<s;r++)n[r].tick(e)}},getMeasuredFPS:function(){return Math.min(this._measuredFPS,this._targetFPS)},addTick:function(t){if(!t||"function"!=typeof t.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(t)},removeTick:function(t){var e=this._tickers,i=e.indexOf(t);0<=i&&e.splice(i,1)},nextTick:function(e){var i=this,n={tick:function(t){i.removeTick(n),e()}};return i.addTick(n),n},timeout:function(t,e){var i=this,n=(new Date).getTime()+e,r={tick:function(){0<=(new Date).getTime()-n&&(i.removeTick(r),t())}};return i.addTick(r),r},interval:function(i,n){var r=(new Date).getTime()+n,t={tick:function(){var t=(new Date).getTime(),e=t-r;0<=e&&(e<n&&(t-=e),r=t+n,i())}};return this.addTick(t),t}});s.Hilo.Ticker=e}(window),function(t){t.Hilo||(t.Hilo={});var e=Array.prototype,s=e.slice;e.indexOf||(e.indexOf=function(t,e){e=e||0;var i,n=this.length;if(0==n||n<=e)return-1;for(e<0&&(e=n+e),i=e;i<n;i++)if(this[i]===t)return i;return-1});var i=Function.prototype;i.bind||(i.bind=function(e){var i=this,n=s.call(arguments,1),t=function(){};function r(){var t=n.concat(s.call(arguments));return i.apply(this instanceof r?this:e,t)}return t.prototype=i.prototype,r.prototype=new t,r}),t.Hilo.undefined=void 0}(window),function(t){t.Hilo||(t.Hilo={});var d=t.Hilo,e={_isDragStart:!1,startDrag:function(t){this._isDragStart&&this.stopDrag(),this._isDragStart=!0;var e,n=this,r={x:0,y:0,preX:0,preY:0},s=(t=t||[-1/0,-1/0,1/0,1/0])[0],a=t[1],o=t[2]==1/0?1/0:s+t[2],h=t[3]==1/0?1/0:a+t[3];function i(t){t.stopPropagation(),u(t),n.off(d.event.POINTER_START,i),n.__dragX=n.x-r.x,n.__dragY=n.y-r.y,e||(e=this.getStage()),e.on(d.event.POINTER_MOVE,c),document.addEventListener(d.event.POINTER_END,l),n.fire("dragStart",r)}function l(t){document.removeEventListener(d.event.POINTER_END,l),e&&e.off(d.event.POINTER_MOVE,c),n.on(d.event.POINTER_START,i),n.fire("dragEnd",r)}function c(t){u(t);var e=r.x+n.__dragX,i=r.y+n.__dragY;n.x=Math.max(s,Math.min(o,e)),n.y=Math.max(a,Math.min(h,i)),n.fire("dragMove",r)}function u(t){r.preX=r.x,r.preY=r.y,r.x=t.stageX,r.y=t.stageY}n.on(d.event.POINTER_START,i),n.stopDrag=function(){this._isDragStart=!1,document.removeEventListener(d.event.POINTER_END,l),e&&e.off(d.event.POINTER_MOVE,c),n.off(d.event.POINTER_START,i)}},stopDrag:function(){this._isDragStart=!1}};t.Hilo.drag=e}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,u=function(){function c(){return+new Date}return e.create({constructor:function(t,e,i,n){var r=this;for(var s in r.target=t,r._startTime=0,r._seekTime=0,r._pausedTime=0,r._pausedStartTime=0,r._reverseFlag=1,r._repeatCount=0,3==arguments.length&&(n=i,i=e,e=null),n)r[s]=n[s];r.setProps(e,i),!n.duration&&n.time&&(r.duration=n.time||0,r.time=0)},target:null,duration:1e3,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(t,e){var i=this.target,n=t||e,r=this._fromProps={},s=this._toProps={};for(var a in t=t||i,e=e||i,n)s[a]=e[a]||0,i[a]=r[a]=t[a]||0;return this},start:function(){var t=this;return t._startTime=c()+t.delay,t._seekTime=0,t._pausedTime=0,t.paused=!1,u.add(t),t},stop:function(){return u.remove(this),this},pause:function(){return this.paused=!0,this._pausedStartTime=c(),this},resume:function(){var t=this;return t.paused=!1,t._pausedStartTime&&(t._pausedTime+=c()-t._pausedStartTime),t._pausedStartTime=0,t},seek:function(t,e){var i=this,n=c();return i._startTime=n,i._seekTime=t,void(i._pausedTime=0)!==e&&(i.paused=e),i._update(n,!0),u.add(i),i},link:function(t){var e,i,n=t.delay,r=this._startTime;return"string"==typeof n&&(e=0==n.indexOf("+"),i=0==n.indexOf("-"),n=e||i?Number(n.substr(1))*(e?1:-1):Number(n)),t.delay=n,t._startTime=e||i?r+this.duration+n:r+n,this._next=t,u.remove(t),this},_render:function(t){var e,i=this.target,n=this._fromProps;for(e in n)i[e]=n[e]+(this._toProps[e]-n[e])*t},_update:function(t,e){var i=this;if(!i.paused||e){var n=t-i._startTime-i._pausedTime+i._seekTime;if(!(n<0)){var r,s=n/i.duration,a=!1;s=s<=0?0:1<=s?1:s;var o=i.ease?i.ease(s):s;i.reverse&&(i._reverseFlag<0&&(s=1-s,o=1-o),s<1e-7&&(0<i.repeat&&i._repeatCount++>=i.repeat||0==i.repeat&&!i.loop?a=!0:(i._startTime=c(),i._pausedTime=0,i._reverseFlag*=-1))),0==i.time&&(r=i.onStart)&&r.call(i,i),i.time=n,i._render(o),(r=i.onUpdate)&&r.call(i,s,i),1<=s&&(i.reverse?(i._startTime=c(),i._pausedTime=0,i._reverseFlag*=-1):i.loop||0<i.repeat&&i._repeatCount++<i.repeat?(i._startTime=c()+i.repeatDelay,i._pausedTime=0):a=!0);var h=i._next;if(h&&h.time<=0){var l=h._startTime;0<l&&l<=t?(h._render(s),h.time=n,u.add(h)):a&&(l<0||t<l)&&h.start()}return a?((r=i.onComplete)&&r.call(i,i),!0):void 0}}},Statics:{_tweens:[],tick:function(){var t,e,i=u._tweens,n=i.length;for(e=0;e<n;e++)(t=i[e])&&t._update(c())&&(i.splice(e,1),e--);return u},add:function(t){var e=u._tweens;return-1==e.indexOf(t)&&e.push(t),u},remove:function(t){var e,i;if(t instanceof Array){for(e=0,i=t.length;e<i;e++)u.remove(t[e]);return u}var n=u._tweens;if(t instanceof u)-1<(e=n.indexOf(t))&&n.splice(e,1);else for(e=0;e<n.length;e++)n[e].target===t&&(n.splice(e,1),e--);return u},removeAll:function(){return u._tweens.length=0,u},fromTo:function(t,e,i,n){n=n||{};var r=t instanceof Array;t=r?t:[t];var s,a,o=n.stagger,h=[];for(a=0;a<t.length;a++)s=new u(t[a],e,i,n),o&&(s.delay=(n.delay||0)+(a*o||0)),s.start(),h.push(s);return r?h:s},to:function(t,e,i){return u.fromTo(t,null,e,i)},from:function(t,e,i){return u.fromTo(t,e,null,i)}}})}();t.Hilo.Tween=u}(window),function(t){t.Hilo||(t.Hilo={});var e=function(){function t(t,e,i,n,r){return t=t||{},e&&(t.EaseIn=e),i&&(t.EaseOut=i),n&&(t.EaseInOut=n),r&&(t.EaseNone=r),t}var e=t(null,null,null,null,function(t){return t}),i=t(null,function(t){return t*t},function(t){return-t*(t-2)},function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}),n=t(null,function(t){return t*t*t},function(t){return--t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}),r=t(null,function(t){return t*t*t*t},function(t){return-(--t*t*t*t-1)},function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}),s=t(null,function(t){return t*t*t*t*t},function(t){return(t-=1)*t*t*t*t+1},function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}),a=Math,o=a.PI,h=.5*o,l=a.sin,c=a.cos,u=a.pow,d=a.sqrt,f=t(null,function(t){return 1-c(t*h)},function(t){return l(t*h)},function(t){return-.5*(c(o*t)-1)}),g=t(null,function(t){return 0==t?0:u(2,10*(t-1))},function(t){return 1==t?1:1-u(2,-10*t)},function(t){return 0==t||1==t?t:(t*=2)<1?.5*u(2,10*(t-1)):.5*(2-u(2,-10*(t-1)))}),p=t(null,function(t){return-(d(1-t*t)-1)},function(t){return d(1- --t*t)},function(t){return(t/=.5)<1?-.5*(d(1-t*t)-1):.5*(d(1-(t-=2)*t)+1)}),v=t({a:1,p:.4,s:.1,config:function(t,e){v.a=t,v.p=e,v.s=e/(2*o)*Math.asin(1/t)||0}},function(t){return-v.a*u(2,10*(t-=1))*l((t-v.s)*(2*o)/v.p)},function(t){return v.a*u(2,-10*t)*l((t-v.s)*(2*o)/v.p)+1},function(t){return(t*=2)<1?v.a*u(2,10*(t-=1))*l((t-v.s)*(2*o)/v.p)*-.5:v.a*u(2,-10*(t-=1))*l((t-v.s)*(2*o)/v.p)*.5+1}),m=t({o:1.70158,s:2.59491,config:function(t){m.o=t,m.s=1.525*t}},function(t){return t*t*((m.o+1)*t-m.o)},function(t){return(t-=1)*t*((m.o+1)*t+m.o)+1},function(t){return(t*=2)<1?t*t*((m.s+1)*t-m.s)*.5:.5*((t-=2)*t*((m.s+1)*t+m.s)+2)}),_=t(null,function(t){return 1-_.EaseOut(1-t)},function(t){return(t/=1)<.36364?7.5625*t*t:t<.72727?7.5625*(t-=.54545)*t+.75:t<.90909?7.5625*(t-=.81818)*t+.9375:7.5625*(t-=.95455)*t+.984375},function(t){return t<.5?.5*_.EaseIn(2*t):.5*_.EaseOut(2*t-1)+.5});return{Linear:e,Quad:i,Cubic:n,Quart:r,Quint:s,Sine:f,Expo:g,Circ:p,Elastic:v,Back:m,Bounce:_}}();t.Hilo.Ease=e}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class.create({load:function(t){var e=this,i=new Image;t.crossOrigin&&(i.crossOrigin=t.crossOrigin),i.onload=function(){e.onLoad(i)},i.onerror=i.onabort=e.onError.bind(i),i.src=t.src+(t.noCache?(-1==t.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(t){return t.onload=t.onerror=t.onabort=null,t},onError:function(t){var e=t.target;return e.onload=e.onerror=e.onabort=null,t}});t.Hilo.ImageLoader=e}(window),function(a){a.Hilo||(a.Hilo={});var o=a.Hilo.Class.create({load:function(t){var e=t.src;if("jsonp"==t.type){var i=t.callbackName||"callback",n=t.callback||"jsonp"+ ++o._count,r=a;r[n]||(r[n]=function(t){delete r[n]}),e+=(-1==e.indexOf("?")?"?":"&")+i+"="+n}t.noCache&&(e+=(-1==e.indexOf("?")?"?":"&")+"t="+ +new Date);var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.onload=this.onLoad.bind(this),s.onerror=this.onError.bind(this),s.src=e,t.id&&(s.id=t.id),document.getElementsByTagName("head")[0].appendChild(s)},onLoad:function(t){var e=t.target;return e.onload=e.onerror=null,e},onError:function(t){var e=t.target;return e.onload=e.onerror=null,t},Statics:{_count:0}});a.Hilo.ScriptLoader=o}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo.EventMixin,n=t.Hilo.ImageLoader,r=t.Hilo.ScriptLoader,s=e.create({Mixes:i,constructor:function(t){this._source=[],this.add(t)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(t){return t&&(t=t instanceof Array?t:[t],this._source=this._source.concat(t)),this},get:function(t){if(t)for(var e=this._source,i=0;i<e.length;i++){var n=e[i];if(n.id===t||n.src===t)return n}return null},getContent:function(t){var e=this.get(t);return e&&e.content},start:function(){return this._loadNext(),this},_loadNext:function(){var i=this,t=i._source,e=t.length;if(i._loaded>=e)i.fire("complete");else if(i._currentIndex<e-1&&i._connections<i.maxConnections){var n=++i._currentIndex,r=t[n],s=i._getLoader(r);if(s){var a=s.onLoad,o=s.onError;s.onLoad=function(t){s.onLoad=a,s.onError=o;var e=a&&a.call(s,t)||t.target;i._onItemLoad(n,e)},s.onError=function(t){s.onLoad=a,(s.onError=o)&&o.call(s,t),i._onItemError(n,t)},i._connections++}i._loadNext(),s&&s.load(r)}},_getLoader:function(t){var e=t.loader;if(e)return e;switch(t.type||function(t){var e,i;(e=t.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i))&&(i=e[1].toLowerCase());return i||null}(t.src)){case"png":case"jpg":case"jpeg":case"gif":case"webp":e=new n;break;case"js":case"jsonp":e=new r}return e},_onItemLoad:function(t,e){var i=this,n=i._source[t];n.loaded=!0,n.content=e,i._connections--,i._loaded++,i.fire("load",n),i._loadNext()},_onItemError:function(t,e){var i=this,n=i._source[t];n.error=e,i._connections--,i._loaded++,i.fire("error",n),i._loadNext()},getSize:function(t){for(var e=0,i=this._source,n=0;n<i.length;n++){var r=i[n];e+=(t?r.loaded&&r.size:r.size)||0}return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});t.Hilo.LoadQueue=s}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo.util,n=t.Hilo.EventMixin,r=e.create({Mixes:n,constructor:function(t){i.copy(this,t,!0),this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){var e;if(!this._element)try{(e=this._element=new Audio).addEventListener("canplaythrough",this._onAudioEvent,!1),e.addEventListener("ended",this._onAudioEvent,!1),e.addEventListener("error",this._onAudioEvent,!1),e.src=this.src,e.volume=this.volume,e.load()}catch(t){(e=this._element={}).play=e.pause=function(){}}return this},_onAudioEvent:function(t){var e=t.type;switch(e){case"canplaythrough":t.target.removeEventListener(e,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(t){return this.volume!=t&&(this.volume=t,this._element.volume=t),this},setMute:function(t){return this.muted!=t&&(this.muted=t,this._element.volume=t?0:this.volume),this},Statics:{isSupported:null!==t.Audio}});t.Hilo.HTMLAudio=r}(window),function(t){t.Hilo||(t.Hilo={});var e,i,n=t.Hilo.Class,r=t.Hilo.util,s=t.Hilo.EventMixin,a=(e=t.AudioContext||t.webkitAudioContext,i=e?new e:null,n.create({Mixes:s,constructor:function(t){r.copy(this,t,!0),this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=i,this._gainNode=i.createGain?i.createGain():i.createGainNode(),this._gainNode.connect(i.destination),this._onAudioEvent=this._onAudioEvent.bind(this),this._onDecodeComplete=this._onDecodeComplete.bind(this),this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var t=a._bufferCache[this.src];if(t)this._onDecodeComplete(t);else{var e=new XMLHttpRequest;e.src=this.src,e.open("GET",this.src,!0),e.responseType="arraybuffer",e.onload=this._onAudioEvent,e.onprogress=this._onAudioEvent,e.onerror=this._onAudioEvent,e.send()}this._buffer=!0}return this},_onAudioEvent:function(t){switch(t.type){case"load":var e=t.target;e.onload=e.onprogress=e.onerror=null,this._context.decodeAudioData(e.response,this._onDecodeComplete,this._onDecodeError),e=null;break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"progress":case"error":this.fire(t)}},_onDecodeComplete:function(t){a._bufferCache[this.src]||(a._bufferCache[this.src]=t),this._buffer=t,this.loaded=!0,this.duration=t.duration,this.fire("load"),this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var t=this._context.createBufferSource();t.start||(t.start=t.noteOn,t.stop=t.noteOff),t.buffer=this._buffer,t.onended=this._onAudioEvent,this._gainNode.gain.value=this.muted?0:this.volume,t.connect(this._gainNode),t.start(0,this._offset),this._audioNode=t,this._startTime=this._context.currentTime,this.playing=!0},_clearAudioNode:function(){var t=this._audioNode;t&&(t.onended=null,t.disconnect(0),this._audioNode=null)},play:function(){return this.playing&&this.stop(),this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1),this},setVolume:function(t){return this.volume!=t&&(this.volume=t,this._gainNode.gain.value=t),this},setMute:function(t){return this.muted!=t&&(this.muted=t,this._gainNode.gain.value=t?0:this.volume),this},Statics:{isSupported:null!=e,enabled:!1,enable:function(){if(!this.enabled&&i){var t=i.createBufferSource();return t.buffer=i.createBuffer(1,1,22050),t.connect(i.destination),t.start?t.start(0,0,0):t.noteOn(0,0,0),this.enabled=!0}return this.enabled},_bufferCache:{},clearBufferCache:function(t){t?this._bufferCache[t]=null:this._bufferCache={}}}}));t.Hilo.WebAudio=a}(window),function(t){t.Hilo||(t.Hilo={});var n=t.Hilo.HTMLAudio,r=t.Hilo.WebAudio,i=t.Hilo.util,e={_audios:{},enableAudio:function(){r.isSupported&&r.enable()},getAudio:function(t,e){void 0===e&&(e=!0),t=this._normalizeSource(t);var i=this._audios[t.src];return i||(e&&r.isSupported?i=new r(t):n.isSupported&&(i=new n(t)),this._audios[t.src]=i),i},removeAudio:function(t){var e="string"==typeof t?t:t.src,i=this._audios[e];i&&(i.stop(),i.off(),this._audios[e]=null,delete this._audios[e])},_normalizeSource:function(t){var e={};return"string"==typeof t?e={src:t}:i.copy(e,t),e}};t.Hilo.WebSound=e}(window),function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo.util,n=e.create({constructor:function(t){this.width=0,this.height=0,this.target=null,this.deadzone=null,this.bounds=null,this.scroll={x:0,y:0},i.copy(this,t)},tick:function(t){var e,i,n=this.target,r=this.scroll,s=this.bounds,a=this.deadzone;n?(a?(e=Math.min(Math.max(n.x-r.x,a[0]),a[0]+a[2]),i=Math.min(Math.max(n.y-r.y,a[1]),a[1]+a[3])):(e=.5*this.width,i=.5*this.height),r.x=n.x-e,r.y=n.y-i,s&&(r.x=Math.min(Math.max(r.x,s[0]),s[0]+s[2]),r.y=Math.min(Math.max(r.y,s[1]),s[1]+s[3]))):(r.x=0,r.y=0)},follow:function(t,e){this.target=t,void 0!==e&&(this.deadzone=e),this.tick()}});t.Hilo.Camera=n}(window),function(t){t.Hilo||(t.Hilo={});var k,e=t.Hilo.Class,i=t.Hilo.util,n=(k=Math.PI/180,e.create({constructor:function(t){t.x=t.x||0,t.y=t.y||0,t.z=t.z||0,t.rotationX=t.rotationX||0,t.rotationY=t.rotationY||0,t.rotationZ=t.rotationZ||0,i.copy(this,t)},translate:function(t,e,i){this.tx=t,this.ty=e,this.tz=i},rotateX:function(t){this.rotationX=t},rotateY:function(t){this.rotationY=t},rotateZ:function(t){this.rotationZ=t},project:function(t,e){var i,n,r,s,a,o,h,l,c,u,d,f,g,p,v=this.rotationX*k,m=this.rotationY*k,_=this.rotationZ*k,y=Math.cos(v),x=Math.sin(v),w=Math.cos(m),b=Math.sin(m),T=Math.cos(_),H=Math.sin(_),C=t.x-this.x,E=t.y-this.y,S=t.z-this.z,R={x:(i=C)*(r=T)-(n=E)*(s=H),y:i*s+n*r,z:S};a=R.x,o=R.y,h=R.z,u=(R={x:a*(l=w)-h*(c=b),y:o,z:a*c+h*l}).x,d=R.y,f=R.z,R={x:u,y:d*(g=y)-f*(p=x),z:d*p+f*g},this.tx&&(R.x-=this.tx),this.ty&&(R.y-=this.ty),this.tz&&(R.z-=this.tz);var A=this.fv/(this.fv+R.z),M=R.x*A,P=-R.y*A,I={x:M+this.fx,y:P+this.fy,z:-R.z,scale:A};return e&&(e.x=I.x,e.y=I.y,e.z=I.z,e.scaleX=I.scale,e.scaleY=I.scale),I},sortZ:function(){this.stage.children.sort(function(t,e){return t.z>e.z})},tick:function(){this.sortZ()}}));t.Hilo.Camera3d=n}(window),function(t){t.Hilo||(t.Hilo={});var c=t.Hilo,u=t.Hilo.Class,d=t.Hilo.View,f=t.Hilo.Container,g=t.Hilo.Drawable,p=t.Hilo.util,e=function(){for(var t=["x","y","vx","vy","ax","ay","rotation","rotationV","scale","scaleV","alpha","alphaV","life"],a=[],e=0,i=t.length;e<i;e++){var n=t[e];a.push(n),a.push(n+"Var")}var o={x:0,y:0,vx:0,vy:0,ax:0,ay:0,scale:1,scaleV:0,alpha:1,alphaV:0,rotation:0,rotationV:0,life:1},r=[],s=u.create({Extends:f,constructor:function(t){this.id=this.id||t.id||c.getUid("ParticleSystem"),this.emitterX=0,this.emitterY=0,this.gx=0,this.gy=0,this.totalTime=1/0,this.emitNum=10,this.emitNumVar=0,this.emitTime=.2,this.emitTimeVar=0,this.particle={},s.superclass.constructor.call(this,t),this.reset(t)},Statics:{PROPS:a,PROPS_DEFAULT:o,diedParticles:r},reset:function(t){p.copy(this,t),(this.particle.system=this).totalTime<=0&&(this.totalTime=1/0)},onUpdate:function(t){t*=.001,this._isRun&&(this._totalRunTime+=t,this._currentRunTime+=t,this._currentRunTime>=this._emitTime&&(this._currentRunTime=0,this._emitTime=l(this.emitTime,this.emitTimeVar),this._emit()),this._totalRunTime>=this.totalTime&&this.stop())},_emit:function(){for(var t=l(this.emitNum,this.emitNumVar)>>0,e=0;e<t;e++)this.addChild(h.create(this.particle))},start:function(){this.stop(!0),this._currentRunTime=0,this._totalRunTime=0,this._isRun=!0,this._emitTime=l(this.emitTime,this.emitTimeVar)},stop:function(t){if(this._isRun=!1,t)for(var e=this.children.length-1;0<=e;e--)this.children[e].destroy()}}),h=u.create({Extends:d,constructor:function(t){this.id=this.id||t.id||c.getUid("Particle"),h.superclass.constructor.call(this,t),this.init(t)},onUpdate:function(t){if(t*=.001,this._died)return!1;var e=this.ax+this.system.gx,i=this.ay+this.system.gy;return this.vx+=e*t,this.vy+=i*t,this.x+=this.vx*t,this.y+=this.vy*t,this.rotation+=this.rotationV,.1<this._time&&(this.alpha+=this.alphaV),this.scale+=this.scaleV,this.scaleX=this.scaleY=this.scale,this._time+=t,this._time>=this.life||this.alpha<=0?(this.destroy(),!1):void 0},setImage:function(t,e){this.drawable=this.drawable||new g,e=e||[0,0,t.width,t.height],this.width=e[2],this.height=e[3],this.drawable.rect=e,this.drawable.image=t},destroy:function(){this._died=!0,this.alpha=0,this.removeFromParent(),r.push(this)},init:function(t){this.system=t.system,this._died=!1,this._time=0,this.alpha=1;for(var e=0,i=a.length;e<i;e++){var n=a[e],r=void 0===t[n]?o[n]:t[n];this[n]=l(r,t[n+"Var"])}if(this.x+=this.system.emitterX,this.y+=this.system.emitterY,t.image){var s=t.frame;s&&s[0].length&&(s=s[Math.random()*s.length>>0]),this.setImage(t.image,s),void 0!==t.pivotX&&(this.pivotX=t.pivotX*s[2]),void 0!==t.pivotY&&(this.pivotY=t.pivotY*s[3])}},Statics:{create:function(t){if(0<r.length){var e=r.pop();return e.init(t),e}return new h(t)}}});function l(t,e){return e?t+2*(Math.random()-.5)*e:t}return s}();t.Hilo.ParticleSystem=e}(window),function(t){window.onload=function(){e.init()};var e=t.game={width:0,height:0,title:null,asset:null,stage:null,ticker:null,state:null,hoodle:null,obstacles:null,fences:null,bonus:null,btn:null,progress:null,bendRod:null,gameReadyScene:null,gameOverScene:null,init:function(){this.asset=new e.Asset,this.asset.on("complete",function(t){this.asset.off("complete"),this.initStage()}.bind(this)),this.asset.load()},initStage:function(){this.width=667,this.height=375,this.scale=1;this.stage=new Hilo.Stage({renderType:"canvas",width:this.width,height:this.height,scaleX:this.scale,scaleY:this.scale});document.body.appendChild(this.stage.canvas),this.ticker=new Hilo.Ticker(60),this.ticker.addTick(Hilo.Tween),this.ticker.addTick(this.stage),this.ticker.start(),this.stage.enableDOMEvent([Hilo.event.POINTER_START,Hilo.event.POINTER_MOVE,Hilo.event.POINTER_END],!0),this.stage.onUpdate=this.onUpdate.bind(this),this.initBackground(),this.initScenes()},onUserInput:function(){"start"===this.state?(this.progress.play(),this.state="playing"):"playing"===this.state&&this.progress.stop(function(t){this.hoodle.startDown(t),this.btn.setEnabled(!1)}.bind(this))},gameReady:function(){this.initFences(),this.initBendRod(),this.initBonus(),this.initObstacles(),this.initHoodle(),this.initProgress(),this.initButton(),this.state="start",this.hoodle.getReady()},gameOver:function(){"over"!==this.state&&(this.state="over",this.stage.contains(this.gameOverScene)||this.stage.addChild(this.gameOverScene),this.gameOverScene.show(this.bonus.getOverBonus(this.hoodle)))},initBackground:function(){var t=this.width*this.scale,e=this.height*this.scale;document.body.insertBefore(Hilo.createElement("div",{id:"bg",style:{position:"absolute",background:"url(images/bg.png) no-repeat",backgroundSize:"cover",width:t+"px",height:e+"px"}}),this.stage.canvas)},initScenes:function(){this.gameReadyScene=new e.ReadyScene({width:this.width,height:328,image:this.asset.ready}).addTo(this.stage),this.gameOverScene=new e.OverScene({width:this.width,height:this.height,image:this.asset.over,visible:!1}),this.gameReadyScene.getChildById("start").on(Hilo.event.POINTER_START,function(t){t._stopped=!0,this.gameReadyScene.hide(function(){"start"!==this.state&&this.gameReady()}.bind(this))}.bind(this)),this.gameOverScene.getChildById("over").on(Hilo.event.POINTER_START,function(t){t._stopped=!0,this.gameOverScene.visible=!1,this.destory(),this.initScenes()}.bind(this)),this.gameReadyScene.visible=!0},initFences:function(){this.fences=new e.Fences({id:"fences",image:this.asset.fence,height:34,width:368,activeRect:[118,294,368,34]}).addTo(this.stage)},initBonus:function(){this.bonus=new e.Bonus({id:"bouns",image:this.asset.bonus,height:50,width:368,activeRect:[118,278,368,50]}).addTo(this.stage)},initBendRod:function(){this.bendRod=new e.BendRod({id:"bendRod",width:this.width,height:this.height,activeRect:[118,64,399,263]}).addTo(this.stage)},initHoodle:function(){this.hoodle=new e.Hoodle({id:"hoodle",image:this.asset.hoodle,width:14,height:14,startX:500,startY:225,activeRect:[118,64,399,263]}).addTo(this.stage)},initObstacles:function(){this.obstacles=new e.Obstacles({id:"obstacles",image:this.asset.obstacles,height:263,width:368,activeRect:[118,65,348,193],amount:22}).addTo(this.stage)},initButton:function(){this.btn=new Hilo.Button({id:"btn",x:540,y:229,image:this.asset.button}).addTo(this.stage),this.btn.on(Hilo.event.POINTER_START,this.onUserInput.bind(this))},initProgress:function(){this.progress=new e.Progress({width:80,height:80,x:533,y:221}).addTo(this.stage)},onUpdate:function(){"start"!==this.state&&(this.hoodle&&this.hoodle.end?this.gameOver():(this.obstacles&&this.obstacles.checkCollision(this.hoodle),this.fences&&this.fences.checkCollision(this.hoodle),this.bendRod&&this.bendRod.checkCollision(this.hoodle)))},destory:function(){this.stage.removeAllChildren()}}}(window),window.game.Asset=Hilo.Class.create({Mixes:Hilo.EventMixin,queue:null,bg:null,hoodle:null,obstacles:null,fence:null,load:function(){this.queue=new Hilo.LoadQueue,this.queue.add([{id:"ready",src:"images/ready.png"},{id:"over",src:"images/over.png"},{id:"hoodle",src:"images/hoodle.png"},{id:"obstacles",src:"images/obstacles.png"},{id:"fence",src:"images/fence.png"},{id:"bonus",src:"images/bonus.png"},{id:"button",src:"images/button.png"}]),this.queue.on("complete",this.onComplete.bind(this)),this.queue.start()},onComplete:function(){this.ready=this.queue.get("ready").content,this.over=this.queue.get("over").content,this.obstacles=this.queue.get("obstacles").content,this.hoodle=this.queue.get("hoodle").content,this.fence=this.queue.get("fence").content,this.bonus=this.queue.get("bonus").content,this.button=this.queue.get("button").content,this.queue.off("complete"),this.fire("complete")}}),function(t){var e=window.game.ReadyScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),this.init(t)},init:function(t){var e=new Hilo.Bitmap({id:"baffle",image:t.image,rect:[0,52,368,50]}),i=new Hilo.Bitmap({id:"start",image:t.image,rect:[0,0,90,52]});e.x=118,e.y=278,i.x=526,i.y=75,this.addChild(e,i)},hide:function(t){Hilo.Tween.to(this.getChildById("baffle"),{y:this.height,height:0},{duration:400,ease:Hilo.Ease.Back.EaseOut,onComplete:function(){this.visible=!1,t()}.bind(this)})}})}(),function(t){var e=window.game.OverScene=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),this.overImages=[{color:"golden",rect:[0,1125,667,375]},{color:"red",rect:[0,750,667,375]},{color:"blue",rect:[0,375,667,375]},{color:"green",rect:[0,0,667,375]},{rect:[0,1500,667,375]}],this.image=t.image,this.init(t)},image:null,overImages:[],init:function(t){var e=new Hilo.Bitmap({id:"over"});this.addChild(e)},show:function(i){this.visible=!0;var n=4;this.overImages.forEach(function(t,e){t.color===i&&(n=e)}),this.getChildById("over").setImage(this.image,this.overImages[n].rect),Hilo.Tween.from(this.getChildById("over"),{alpha:0},{duration:400,ease:Hilo.Ease.Back.EaseIn})}})}(),function(t){var e=t.Hoodle=Hilo.Class.create({Extends:Hilo.Bitmap,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),Hilo.util.copy(this,t,!0),this.speedUpY=this.gravity=.2,this.force=.3*this.gravity,this.bounceSquare=.4,this.bounceCircle=.6,this.radius=this.width>>1,this.moveRange=[-20,-6],this.x=this.startX,this.y=this.startY,this.borderRadius=[{direction:0,x:t.activeRect[0]+t.activeRect[2]-34,y:t.activeRect[1]+34,radius:34},{direction:1,x:t.activeRect[0]+34,y:t.activeRect[1]+34,radius:34}]},startX:0,startY:0,gravity:0,force:0,speedUpX:0,speedUpY:0,bounceSquare:0,bounceCircle:0,moveX:0,moveY:0,moveRange:[],radius:0,isStatic:!0,activeRect:[],borderRadius:[],getReady:function(){this.x=this.startX,this.y=this.startY,this.speedUpX=0,this.moveY=0},startDown:function(t){this.isStatic=!1,this.moveY=this.moveRange[1]+(this.moveRange[0]-this.moveRange[1])*t},collisionSquare:function(e){["left","right","side"].some(function(t){return t===e})?this.moveX*=-1*this.bounceSquare:this.moveY*=-1*this.bounceSquare},collisionCircle:function(t){var e,i,n,r={x:this.moveX,y:this.moveY},s={x:this.x-t.x+this.radius,y:this.y-t.y+this.radius},a=1/Math.sqrt(s.x*s.x+s.y*s.y);s.x*=a,s.y*=a,i=s,n=(e=r).x*i.x+e.y*i.y,r={x:e.x-2*n*i.x,y:e.y-2*n*i.y},this.moveX=r.x*this.bounceCircle,this.moveY=r.y*this.bounceCircle},judgeStatic:function(){var t=this.activeRect[3]/1e3;Math.abs(this.moveY)<=t&&(this.moveY=0,this.speedUpX=0<this.moveX?-this.force:this.force,Math.abs(this.moveX)<=t&&(this.moveX=0,this.isStatic=!0,this.end=!0))},collisionBorder:function(){var t=this.borderRadius,r=this;t.forEach(function(t){var e=!1;if(0===t.direction&&t.x<r.x&&t.y>r.y?e=!0:1===t.direction&&t.x>r.x&&t.y>r.y&&(e=!0),e){var i=Math.sqrt(Math.pow(r.x-t.x+r.radius,2)+Math.pow(r.y-t.y+r.radius,2))-t.radius+r.radius;if(0<i){var n=Math.atan2(t.y-r.y-r.radius,t.x-r.x-r.radius);r.x+=Math.abs(i)*Math.cos(n),r.y+=Math.abs(i)*Math.sin(n),r.collisionCircle(t)}}})},onUpdate:function(){if(!this.isStatic){this.moveY+=this.speedUpY,this.moveX+=this.speedUpX;var t=this.y+this.moveY,e=this.x+this.moveX,i=this.activeRect[1]+this.activeRect[3]-this.height,n=this.activeRect[0]+this.activeRect[2]-this.width;i<t&&e<486||489<e&&t>this.startY?(this.y=e<486?i:this.startY,this.collisionSquare("bottom"),this.judgeStatic()):t<this.activeRect[1]&&(e<this.borderRadius[0].x||e>this.borderRadius[1].x)?(this.y=this.activeRect[1],this.collisionSquare("top")):this.y=t,e<this.activeRect[0]||n<e?(this.x=n<e?n:this.activeRect[0],this.collisionSquare("side")):this.x=e,this.collisionBorder()}}})}(window.game),function(t){var e=window.game.Obstacles=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),Hilo.util.copy(this,t,!0),this.obstacleImages=[{color:"blue",rect:[0,0,20,20]},{color:"red",rect:[0,20,20,20]},{color:"yellow",rect:[0,40,20,20]},{color:"green",rect:[0,60,20,20]},{color:"purple",rect:[0,80,20,20]}],this.paddingX=30,this.paddingY=50,this.baseSpace=40,this.floatSpace=23,this.createObstacles(t.image)},amount:0,showAmount:0,obstacleImages:[],paddingX:0,paddingY:0,baseSpace:0,floatSpace:0,startX:0,startY:0,activeRect:[],createObstacles:function(t){for(var e=0,i=this.amount;e<i;e+=1){var n=new Hilo.Bitmap({id:"obstacle"+e,image:t,rect:this.obstacleImages[0+4*Math.random()>>0].rect}).addTo(this);this.setPosition(n,e),Hilo.util.copy(n,Hilo.drag),n.startDrag(this.activeRect)}},setPosition:function(t,e){0===e?(this.startX=this.floatSpace+Math.random()*this.paddingX>>0,this.startY=this.floatSpace+20+Math.random()*this.paddingY>>0):this.startX+=this.baseSpace+Math.random()*this.floatSpace>>0;var i=this.startX+t.width+this.paddingX-this.width;0<i&&(this.startX=i+this.paddingX,this.startY+=this.baseSpace+Math.random()*this.floatSpace>>0),0<this.startY+t.height+this.paddingY-this.height?t.alpha=0:(this.showAmount++,t.x=this.startX+this.activeRect[0],t.y=this.startY+this.activeRect[1])},resetObstacles:function(){this.sortChildren(function(){return.5-Math.random()}),this.children.forEach(function(t,e){this.setPosition(t,e)}.bind(this))},checkCollision:function(t){if(0===this.children.length)return!1;for(var e=this.children[0].width>>1,i=0,n=this.showAmount;i<n;i+=1){var r=this.children[i],s={x:r.x+r.width/2,y:r.y+r.height/2},a=Math.sqrt(Math.pow(t.x-s.x+t.radius,2)+Math.pow(t.y-s.y+t.radius,2))-(t.radius+e);if(a<0){var o=Math.atan2(t.y-s.y+t.radius,t.x-s.x+t.radius);return t.x+=Math.abs(a)*Math.cos(o),t.y+=Math.abs(a)*Math.sin(o),t.collisionCircle(s),!0}}return!1}})}(),function(t){var e=window.game.Fences=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),Hilo.util.copy(this,t,!0),this.amount=6,this.paddingX=[52,51,51,51,51,51],this.topCircleRadius=3,this.createFences(t.image)},amount:0,paddingX:[],activeRect:[],topCircleRadius:0,createFences:function(t){for(var e=0,i=this.amount;e<i;e+=1){var n=new Hilo.Bitmap({id:"fence"+e,image:t}).addTo(this);this.setPosition(n,e)}},setPosition:function(t,e){t.x=this.paddingX.slice(0,e+1).reduceRight(function(t,e){return t+e})+this.activeRect[0],t.y=this.activeRect[1]},checkCollision:function(t){for(var e=0,i=this.children.length;e<i;e+=1){var n=this.children[e];if(t.hitTestObject(n,!0)){if(t.y>n.y+this.topCircleRadius&&t.x>n.x-t.width&&t.x<n.x)t.x=n.x-t.width,t.collisionSquare("left");else if(t.y>n.y+this.topCircleRadius&&t.x<n.x+n.width&&t.x>n.x)t.x=n.x+n.width,t.collisionSquare("right");else{var r={x:n.x+this.topCircleRadius,y:n.y+this.topCircleRadius},s=Math.sqrt(Math.pow(t.x-r.x+t.radius,2)+Math.pow(t.y-r.y+t.radius,2))-(t.radius+this.topCircleRadius);if(!(s<0))return!1;var a=Math.atan2(t.y-r.y+t.radius,t.x-r.x+t.radius);t.x+=Math.abs(s)*Math.cos(a),t.y+=Math.abs(s)*Math.sin(a),t.collisionCircle(r)}return!0}}return!1}})}(),function(t){var e=window.game.BendRod=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),this.squares=[{x:439,y:97,width:30,height:3},{x:486,y:117,width:3,height:t.activeRect[1]+t.activeRect[3]-117}],this.circle={x:469,y:117,radius:20}},circle:{},squares:[],checkCollision:function(e){var t=this.circle;if(t.x<e.x&&t.y>e.y){var i=Math.sqrt(Math.pow(e.x-t.x+e.radius,2)+Math.pow(e.y-t.y+e.radius,2))-t.radius-e.radius;if(i<0){var n=Math.atan2(e.y-t.y+e.radius,e.x-t.x+e.radius);return e.x+=Math.abs(i)*Math.cos(n),e.y+=Math.abs(i)*Math.sin(n),e.collisionCircle(t),!0}}this.squares.forEach(function(t){e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height&&(e.x<t.x?(e.x=t.x-e.width,e.collisionSquare("left")):e.y<t.y?(e.y=t.y-e.height,e.collisionSquare("top")):e.x>t.x?(e.x=t.x+t.width,e.collisionSquare("right")):e.y>t.y&&(e.y=t.y+t.height,e.collisionSquare("bottom")))})}})}(),function(t){var e=window.game.Bonus=Hilo.Class.create({Extends:Hilo.Container,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),Hilo.util.copy(this,t,!0),this.bonusImages=[{color:"golden",rect:[0,0,40,40]},{color:"red",rect:[40,0,37,37]},{color:"blue",rect:[77,0,33,33]},{color:"green",rect:[110,0,30,30]}],this.amount=7,this.fenceWidth=9,this.paddingX=[0,61,51,51,51,51,51],this.createBonus(t.image)},amount:0,paddingX:[],activeRect:[],bonusImages:[],bonusArray:[],fenceWidth:0,createBonus:function(t){for(var e=0;e!=this.amount;){var i,n=0+100*Math.random()>>0;i=n<10?this.bonusImages[0]:n<30?this.bonusImages[1]:n<60?this.bonusImages[2]:this.bonusImages[3];var r=this.bonusArray.filter(function(t){return t.color===i.color}).length;"golden"===i.color&&2===r||("red"===i.color&&3===r||(this.bonusArray[e++]=i))}for(var s=0,a=this.amount;s<a;s+=1){var o=new Hilo.Bitmap({id:"bonus"+s,image:t,rect:this.bonusArray[s].rect}).addTo(this);this.setPosition(o,s)}},setPosition:function(t,e){var i,n=this.paddingX.slice(0,e+1).reduceRight(function(t,e){return t+e})+this.activeRect[0],r=this.activeRect[1]+this.activeRect[3]-t.height;i=e!==this.amount-1?this.paddingX[e+1]-this.fenceWidth-t.width>>1:this.activeRect[2]-n-t.width+this.activeRect[0]>>1,t.x=n+i,t.y=r},getOverBonus:function(t){if(0===this.children.length||!t)return null;for(var e=0,i=this.children.length;e<i;e+=1){var n=this.children[e];if(t.hitTestObject(n,!0))return this.bonusArray[e].color}return null}})}(),function(t){var e=window.game.Progress=Hilo.Class.create({Extends:Hilo.Graphics,constructor:function(t){t=t||{},e.superclass.constructor.call(this,t),this.startAngle=9*-Math.PI/10,this.endAngle=1*-Math.PI/10,this.angleRange=this.endAngle-this.startAngle,this.init()},startAngle:0,endAngle:0,nowAngle:0,rotating:!1,angleRange:0,init:function(){this.nowAngle=this.startAngle,this.rotating=!1,this.clear(),this.draw()},draw:function(){this.lineStyle(4,"#6dabcf").drawCircle(0,0,40,this.startAngle,this.nowAngle,!1).endFill()},play:function(){this.rotating=!0},stop:function(t){this.rotating&&(this.rotating=!1),t&&t((this.nowAngle-this.startAngle)/Math.abs(this.angleRange))},onUpdate:function(){this.rotating&&(this.clear(),this.nowAngle+=.02*this.angleRange,0<this.angleRange&&this.nowAngle>=this.endAngle?(this.nowAngle=this.endAngle,this.angleRange*=-1):this.angleRange<0&&this.nowAngle<=this.startAngle&&(this.nowAngle=this.startAngle,this.angleRange*=-1),this.draw())}})}();